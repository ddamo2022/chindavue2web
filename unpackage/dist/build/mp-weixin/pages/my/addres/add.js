(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/addres/add"],{"049f":function(e,t,a){},"344c":function(e,t,a){"use strict";a.r(t);var n=a("54bb"),r=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=r.a},"54bb":function(e,t,a){"use strict";var n=a("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("7eb4")),s=n(a("7ca3")),o=n(a("ee10")),i=n(a("77a5"));function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var l={components:{listCell:function(){a.e("components/list-cell/list-cell").then(function(){return resolve(a("bb1c"))}.bind(null,a)).catch(a.oe)},mgRadio:function(){a.e("components/form/my-radio").then(function(){return resolve(a("2c44"))}.bind(null,a)).catch(a.oe)},bkB:function(){a.e("components/common/block-b").then(function(){return resolve(a("6f07"))}.bind(null,a)).catch(a.oe)},mgMap:function(){Promise.all([a.e("common/vendor"),a.e("components/form/my-map")]).then(function(){return resolve(a("c179"))}.bind(null,a)).catch(a.oe)}},data:function(){return{params:{contact:"",call:"mr",mobile:"",address:"",details:"",description:"",label:"company",lat:"",lng:"",id:""},focus:!1,sexArr:[{value:"mr",name:this.$t("my-addres.mr")},{value:"ms",name:this.$t("my-addres.ms"),checked:"true"}],labels:["company","home","school"],loading:!1,isEdit:!1}},onLoad:function(e){var t=this;return(0,o.default)(r.default.mark((function a(){var n,s,o;return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(console.log("op",e),!e||!e.id){a.next=8;break}return t.isEdit=!0,t.id=e.id,a.next=6,t.util.request({url:"".concat(t.api.wdshdz,"/").concat(e.id),data:{id:e.id}});case 6:for(s in n=a.sent,t.params)t.params[s]="mobile"==s?t.removePrefix(n.data[s]):n.data[s];case 8:e&&e.add&&(o=JSON.parse(decodeURIComponent(e.add)),t.params.contact=o.userName,console.log(o.telNumber),t.params.mobile=t.removePrefix(o.telNumber),t.params.description=o.detailInfo),e&&e.type&&(t.type=e.type),t.user.mobile&&(t.params.mobile=t.removePrefix(t.user.mobile));case 11:case"end":return a.stop()}}),a)})))()},methods:{chooseLocation:function(){this.$refs.mgmap.choose()},setCLP:function(e){console.log(e),this.params.details=e.address,this.params.address=e.address,this.params.lat=e.latitude,this.params.lng=e.longitude,this.focus=!0},label:function(e){this.params.label=e},removePrefix:function(e){return e.replace(/^\+66/,"")},auZdtx:function(){console.log("mobile",this.user.mobile),this.params.mobile=this.removePrefix(this.user.mobile)},deleteAdd:function(){var e=this;return(0,o.default)(r.default.mark((function t(){var a,n,s;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.util.modal(e.$t("my-addres.confirm_delete_address"));case 2:return t.next=4,e.util.request({url:"".concat(e.api.wdshdz,"/").concat(e.id),method:"DELETE",mask:1});case 4:a=t.sent,n=a.msg,e.util.message(n,1,1e3),s=e.util.getPage(),"wdxddz"==e.type?s.$vm.getcData():s.$vm.getData(),i.default.swnb(1e3);case 10:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return(0,o.default)(r.default.mark((function t(){var a,n,s,o,c,l;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=["lat","lng"],e.params.id||a.push("id"),n=i.default.isFailParams({field:e.params,filter:a,tips:{userId:e.$t("my-addres.missing_user"),contact:e.$t("my-addres.please_enter_contact_person"),mobile:e.$t("my-addres.enter_phone_number"),address:e.$t("my-addres.please_select_address"),description:e.$t("my-addres.please_enter_house_number_details"),label:e.$t("my-addres.please_select_label"),id:e.$t("my-addres.missing_address")}}),n){t.next=7;break}return t.abrupt("return");case 7:return s=d({},e.params),o=s.mobile,o=s.mobile.startsWith("+66")?s.mobile:s.mobile.startsWith("66")?"+66"+s.mobile.slice(2):"+66"+s.mobile,s.mobile=o,e.loading=!0,t.next=14,e.util.request({url:e.params.id?"".concat(e.api.wdshdz,"/").concat(e.params.id):e.api.wdshdz,method:e.params.id?"PUT":"POST",mask:1,data:s});case 14:c=t.sent,c?(e.util.message(e.$t("my-addres.save_successful"),1,1e3),l=e.util.getPage(),"wdxddz"==e.type?l.$vm.getcData():l.$vm.getData(),i.default.swnb(1e3)):e.loading=!1;case 16:case"end":return t.stop()}}),t)})))()}}};t.default=l},"6aee":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return n}));var n={listCell:function(){return a.e("components/list-cell/list-cell").then(a.bind(null,"bb1c"))},uniIcons:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(a.bind(null,"d899"))}},r=function(){var e=this,t=e.$createElement,a=(e._self._c,e.$t("my-addres.contact_person")),n=e.$t("my-addres.please_enter_name_of_recipient"),r=e.$t("my-addres.gender"),s=e.$t("my-addres.phone_number"),o=e.$t("my-addres.please_enter_phone_number"),i=e.$t("my-addres.delivery_address"),c=e.$t("my-addres.click_to_select"),d=e.$t("my-addres.house_number"),l=e.$t("my-addres.select_label"),u=e.isEdit?e.$t("my-addres.delete"):null,m=e.$t("my-addres.save");e.$mp.data=Object.assign({},{$root:{m0:a,m1:n,m2:r,m3:s,m4:o,m5:i,m6:c,m7:d,m8:l,m9:u,m10:m}})},s=[]},a7e5:function(e,t,a){"use strict";a.r(t);var n=a("6aee"),r=a("344c");for(var s in r)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(s);a("b8ce");var o=a("828b"),i=Object(o["a"])(r["default"],n["b"],n["c"],!1,null,"60586190",null,!1,n["a"],void 0);t["default"]=i.exports},ac81:function(e,t,a){"use strict";(function(e,t){var n=a("47a9");a("b483");n(a("3240"));var r=n(a("a7e5"));e.__webpack_require_UNI_MP_PLUGIN__=a,t(r.default)}).call(this,a("3223")["default"],a("df3c")["createPage"])},b8ce:function(e,t,a){"use strict";var n=a("049f"),r=a.n(n);r.a}},[["ac81","common/runtime","common/vendor"]]]);