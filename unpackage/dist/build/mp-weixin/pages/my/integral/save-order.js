(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/integral/save-order"],{"4bad":function(e,t,n){"use strict";n.r(t);var a=n("9b6a"),r=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=r.a},"6c74":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var a={pay:function(){return Promise.all([n.e("common/vendor"),n.e("components/pay/pay")]).then(n.bind(null,"1e12"))}},r=function(){var e=this,t=e.$createElement,n=(e._self._c,e.ModeArr.length),a=e.checkData.goods&&e.checkData.goods&&e.checkData.goods.integral>0?e.$t("integral.points"):null,r=1==e.deliveryMode?e.$t("integral.courier_fee"):null;e.$mp.data=Object.assign({},{$root:{g0:n,m0:a,m1:r}})},i=[]},7506:function(e,t,n){"use strict";var a=n("92d2"),r=n.n(a);r.a},"92d2":function(e,t,n){},"9b6a":function(e,t,n){"use strict";(function(e){var a=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("7eb4")),i=a(n("ee10")),o=(n("8f59"),a(n("77a5")),n("d468")),c=getApp().globalData,s={name:"js-details",components:{CheckSave:function(){n.e("pages/my/integral/components/check-save").then(function(){return resolve(n("baa5"))}.bind(null,n)).catch(n.oe)},SelfFetchAddres:function(){n.e("pages/my/integral/components/self-fetch-addres").then(function(){return resolve(n("366e"))}.bind(null,n)).catch(n.oe)},TakeOutAddres:function(){n.e("pages/my/integral/components/take-out-addres").then(function(){return resolve(n("371d"))}.bind(null,n)).catch(n.oe)},load:function(){n.e("components/common/load").then(function(){return resolve(n("1332"))}.bind(null,n)).catch(n.oe)},Pay:function(){Promise.all([n.e("common/vendor"),n.e("components/pay/pay")]).then(function(){return resolve(n("1e12"))}.bind(null,n)).catch(n.oe)}},data:function(){return{deliveryMode:"1",showLoading:!0,loading:!1,payObj:{},params:{storeId:0,addressId:0,goodsId:"",diningType:1},storeInfo:{},checkData:{},showGg:!1}},onLoad:function(e){var t=this;return(0,i.default)(r.default.mark((function n(){var a,i;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.id&&e.diningType&&(a=e.id,i=e.diningType),t.id=a,t.params.goodsId=a,t.params.diningType=i,t.deliveryMode=i,t.util.setNT(t.$t("integral.confirm_redemption")),t.getCheckOut();case 7:case"end":return n.stop()}}),n)})))()},onShow:function(){c.xzdzInfo&&(this.params.addressId=c.xzdzInfo.id,this.params.diningType=this.deliveryMode,this.getCheckOut()),e.getStorageSync("rStoreInfo")&&(this.storeInfo=e.getStorageSync("rStoreInfo"),this.handstore(this.storeInfo),this.load(this.storeInfo.id))},mixins:[o.utilMixins],computed:{ModeArr:function(){var e=[];return this.checkData&&this.checkData.goods&&this.checkData.goods.deliveryChannel.indexOf(1)>-1&&e.push({name:this.$t("integral.courier_delivery"),value:"1",cname:"leftInactive",acname:"leftActive",icon:"icon-waimaifuwu"}),this.checkData&&this.checkData.goods&&this.checkData.goods.deliveryChannel.indexOf(2)>-1&&e.push({name:this.$t("integral.store_pickup"),value:"2",cname:"rightInactive",acname:"rightActive",icon:"icon-zhongbao-mendian"}),e}},methods:{getCheckOut:function(){var e=this;return(0,i.default)(r.default.mark((function t(){var n,a;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.util.request({url:e.api.pMallOut,data:e.params});case 2:n=t.sent,a=n.data,a&&(e.check=!1),e.checkData=a;case 6:case"end":return t.stop()}}),t)})))()},savePay:function(){var e=this;return(0,i.default)(r.default.mark((function t(){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1!=e.params.diningType||e.checkData.order.address){t.next=2;break}return t.abrupt("return",e.util.message(e.$t("integral.please_select_address"),3));case 2:if(2!=e.params.diningType||e.params.storeId){t.next=4;break}return t.abrupt("return",e.util.message(e.$t("integral.please_select_store"),3));case 4:return t.next=6,e.util.modal(e.$t("integral.are_you_sure_to_redeem_product"));case 6:e.loading=!0,e.checkData.pay&&e.checkData.pay.money>0?(e.zfForm=e.checkData.pay,e.$refs["Pay"].jfOpen(JSON.stringify({orderSn:e.checkData.pay.orderSn,orderType:"jfsc",go:{t:2,url:"/pages/my/integral/integral-record?orderSn=".concat(e.checkData.pay.orderSn)}}),JSON.stringify(e.checkData.pay))):e.zfPay();case 8:case"end":return t.stop()}}),t)})))()},zfPay:function(){var e=this;return(0,i.default)(r.default.mark((function t(){var n,a,i;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading=!1,!(e.checkData.pay&&e.checkData.pay.money<=0)){t.next=9;break}return t.next=4,e.util.request({url:e.api.jfsplb,method:"POST",ct:1});case 4:n=t.sent,a=n.data,i=n.msg,e.util.message(i,3),setTimeout((function(){e.go({t:2,url:"/pages/my/integral/integral-record?orderSn=".concat(a.orderSn)})}),300);case 9:case"end":return t.stop()}}),t)})))()},cPay:function(){this.getCheckOut()},changeDeliveryMode:function(e){e.value!=this.deliveryMode&&(this.deliveryMode=e.value,this.params.diningType=e.value,this.getCheckOut())},selectTime:function(){this.$refs["CheckTime"].open(this.deliveryMode)},setMobile:function(e){this.params.mobile=e,this.params.diningType=this.deliveryMode,this.getCheckOut()},handstore:function(e){this.params.storeId=e.id,this.params.diningType=this.deliveryMode,this.getCheckOut()},load:function(t){return(0,i.default)(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t&&e.removeStorageSync("rStoreInfo");case 1:case"end":return n.stop()}}),n)})))()}}};t.default=s}).call(this,n("df3c")["default"])},"9c3d":function(e,t,n){"use strict";(function(e,t){var a=n("47a9");n("b483");a(n("3240"));var r=a(n("d63b"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},d63b:function(e,t,n){"use strict";n.r(t);var a=n("6c74"),r=n("4bad");for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n("7506");var o=n("828b"),c=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,"ee40bf3c",null,!1,a["a"],void 0);t["default"]=c.exports}},[["9c3d","common/runtime","common/vendor"]]]);