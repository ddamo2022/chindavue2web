(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/signin/index"],{"179f":function(n,t,e){"use strict";(function(n,t){var i=e("47a9");e("b483");i(e("3240"));var a=i(e("8319"));n.__webpack_require_UNI_MP_PLUGIN__=e,t(a.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])},"2d64":function(n,t,e){"use strict";(function(n){var i=e("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(e("7eb4")),r=i(e("7ca3")),o=i(e("ee10")),c=i(e("3b2d")),s=e("8f59"),u=e("d468"),l=(e("cc12"),i(e("77a5")));function m(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,i)}return e}function g(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?m(Object(e),!0).forEach((function(t){(0,r.default)(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):m(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function f(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n||(n=new Date),"object"!==(0,c.default)(n)&&(n=n.replace(/-/g,"/"));var e=new Date(n);e.setDate(e.getDate()+t);var i=e.getFullYear(),a=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,r=e.getDate()<10?"0"+e.getDate():e.getDate();return{fullDate:i+"-"+a+"-"+r,year:i,month:a,date:r,day:e.getDay()}}var d={name:"index",components:{load:function(){e.e("components/common/load").then(function(){return resolve(e("1332"))}.bind(null,e)).catch(e.oe)},sqBtn:function(){Promise.all([e.e("common/vendor"),e.e("components/common/sq-btn")]).then(function(){return resolve(e("c52b"))}.bind(null,e)).catch(e.oe)}},data:function(){return{mySignData:"",config:{series:[]},showCalendar:!1,info:{lunar:!0,range:!0,insert:!1,selected:[]},param:{year:f().year,month:f().month}}},onLoad:function(){var n=this;return(0,o.default)(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.getpageconfig().then((function(){n.util.setNT(n.config.name||n.$t("my-signin.check_in"))}));case 2:n.getLoginInfo(),n.mySign();case 4:case"end":return t.stop()}}),t)})))()},onReady:function(){var n=this;this.$nextTick((function(){n.showCalendar=!0}))},mixins:[u.utilMixins],computed:{jfName:function(){return this.system.custom.integral}},methods:g(g({},(0,s.mapActions)(["getConfig"])),{},{getpageconfig:function(){var t=this;return(0,o.default)(a.default.mark((function e(){var i,r;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.util.request({url:t.api.cMap,method:"POST",ct:1,data:{idents:["singInSetting"]}});case 2:i=e.sent,r=i.data,t.config=r&&r.singInSetting,r.singInSetting&&1!=r.singInSetting.switch&&n.showModal({title:t.$t("my-signin.tips"),content:t.$t("my-signin.check_in_function_is_closed"),showCancel:!1,success:function(n){t.go({t:6,url:"/pages/index/my-index"})}});case 6:case"end":return e.stop()}}),e)})))()},mySign:function(){var n=this;return(0,o.default)(a.default.mark((function t(){var e,i,r;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.util.request({url:n.api.wdqdsj,data:n.param});case 2:e=t.sent,i=e.data,n.mySignData=i,r=i&&i.singInList?i.singInList:[],n.info.date=f(new Date,-30).fullDate,n.info.startDate=f(new Date,-60).fullDate,n.info.endDate=f(new Date,30).fullDate,r.forEach((function(t){n.info.selected.push({date:t,info:n.$t("my-signin.checked_in")})}));case 10:case"end":return t.stop()}}),t)})))()},ljqd:function(){var n=this;return(0,o.default)(a.default.mark((function t(){var e,i;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.isLogin){t.next=3;break}return n.$refs["sqBtn"].open(),t.abrupt("return");case 3:return t.next=5,n.util.request({url:n.api.wdqdsj,method:"POST"});case 5:e=t.sent,e.res,i=e.msg,n.util.message(i,1),setTimeout((function(){n.mySign()}),500);case 10:case"end":return t.stop()}}),t)})))()},change:function(n){},monthSwitch:function(n){this.param.year=n.year,this.param.month=n.month,this.mySign()},mysignin:function(n){this.go({t:1,url:"/pages/my/integral/my-integral?type="+n.type})},mycoupon:function(){this.go({t:1,url:"/pages/other/coupon/couponList"})},mybalance:function(){this.go({t:1,url:"/pages/other/recharge/yemx"})},getDates:function(n){for(var t=new Date(n),e=t.getTime(),i=t.getDay(),a=[],r=0;r<7;r++)a.push(new Date(e+864e5*(r-(i+6)%7)).toLocaleDateString().replace(/\//g,"-"));for(var o in a)a[o]=a[o].split("-").map(l.default.formatNumber).join("-");return console.log(a),a}})};t.default=d}).call(this,e("df3c")["default"])},"432f":function(n,t,e){"use strict";e.d(t,"b",(function(){return a})),e.d(t,"c",(function(){return r})),e.d(t,"a",(function(){return i}));var i={uniCalendar:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uni-calendar/components/uni-calendar/uni-calendar")]).then(e.bind(null,"eab1"))}},a=function(){var n=this,t=n.$createElement,e=(n._self._c,n.mySignData?n.$t("my-signin.consecutive_check_ins"):null),i=n.mySignData?n.$t("my-signin.days"):null,a=n.mySignData&&n.mySignData.today?n.$t("my-signin.checked_in_today"):null,r=n.mySignData&&!n.mySignData.today?n.$t("my-signin.not_checked_in_today"):null,o=n.mySignData&&n.mySignData.today?n.$t("my-signin.checked_in"):null,c=n.mySignData&&!n.mySignData.today?n.$t("my-signin.check_in_now"):null,s=n.mySignData&&n.config&&1==n.config.seriesSwitch&&n.config.series?n.$t("my-signin.consecutive_check_in_rewards"):null,u=n.mySignData&&n.config&&1==n.config.seriesSwitch&&n.config.series?n.__map(n.config.series,(function(t,e){var i=n.__get_orig(t),a=n.$t("my-signin.streak"),r=n.$t("my-signin.days"),o=1==t.balanceSwitch&&t.balance?n.$t("my-signin.gift_balance"):null,c=1==t.integralSwitch&&t.integral?n.$t("my-signin.gift_points"):null,s=1==t.couponSwitch&&t.couponList?n.$t("my-signin.gift_coupons"):null;return{$orig:i,m7:a,m8:r,m9:o,m10:c,m11:s}})):null,l=n.mySignData?n.$t("my-signin.my_check_ins"):null,m=n.mySignData?n.$t("my-signin.points"):null,g=n.mySignData?n.$t("my-signin.total_points"):null,f=n.mySignData?n.$t("my-signin.total_balance"):null,d=n.mySignData?n.$t("my-signin.pieces"):null,y=n.mySignData?n.$t("my-signin.total_coupons"):null,p=n.mySignData?n.$t("my-signin.times"):null,h=n.mySignData?n.$t("my-signin.total_check_ins"):null,D=n.mySignData?n.$t("my-signin.check_in_instructions"):null;n.$mp.data=Object.assign({},{$root:{m0:e,m1:i,m2:a,m3:r,m4:o,m5:c,m6:s,l0:u,m12:l,m13:m,m14:g,m15:f,m16:d,m17:y,m18:p,m19:h,m20:D}})},r=[]},"69e9":function(n,t,e){"use strict";e.r(t);var i=e("2d64"),a=e.n(i);for(var r in i)["default"].indexOf(r)<0&&function(n){e.d(t,n,(function(){return i[n]}))}(r);t["default"]=a.a},"792e":function(n,t,e){},8319:function(n,t,e){"use strict";e.r(t);var i=e("432f"),a=e("69e9");for(var r in a)["default"].indexOf(r)<0&&function(n){e.d(t,n,(function(){return a[n]}))}(r);e("d88b");var o=e("828b"),c=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"197829a0",null,!1,i["a"],void 0);t["default"]=c.exports},d88b:function(n,t,e){"use strict";var i=e("792e"),a=e.n(i);a.a}},[["179f","common/runtime","common/vendor"]]]);