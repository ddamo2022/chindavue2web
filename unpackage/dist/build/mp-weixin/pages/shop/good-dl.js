(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shop/good-dl"],{"2a59":function(t,e,n){"use strict";(function(t,a){var i=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n("7eb4")),o=i(n("3b2d")),s=i(n("ee10")),c=i(n("7ca3")),u=n("8f59"),l=n("d468"),g=n("cc12");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){(0,c.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p={name:"goods-dl",components:{mgRtext:function(){Promise.all([n.e("common/vendor"),n.e("components/common/functionCmp/rich-text")]).then(function(){return resolve(n("248b"))}.bind(null,n)).catch(n.oe)},sqBtn:function(){Promise.all([n.e("common/vendor"),n.e("components/common/sq-btn")]).then(function(){return resolve(n("c52b"))}.bind(null,n)).catch(n.oe)},userPrivacy:function(){n.e("components/user/userPrivacy").then(function(){return resolve(n("50b8"))}.bind(null,n)).catch(n.oe)},Actions:function(){n.e("components/goods/actions/actions").then(function(){return resolve(n("b7fd"))}.bind(null,n)).catch(n.oe)},ProductModal:function(){Promise.all([n.e("common/vendor"),n.e("components/goods/product-modal/tc-modal")]).then(function(){return resolve(n("a765"))}.bind(null,n)).catch(n.oe)}},data:function(){return{dType:"out",goodId:"",storeId:"",ginfo:{},cnum:1,jsPrice:"",jslinePrice:"",jsDiscountLabel:"",diningType:"",tableId:0,butType:"",tcproduct:{},tcShow:!1}},onLoad:function(t){t&&t.goodId&&(this.goodId=t.goodId,this.storeId=t.storeId,this.dType=t.dType,this.diningType=t.diningType,this.tableId=t.tableId,"ins"==t.dType?this.loadIns(this.storeId):this.load(this.storeId)),this.util.setNT("商品详情")},onReady:function(){var e=this;t.getPrivacySetting({success:function(t){t.needAuthorization&&e.$refs.privacy.open(t.privacyContractName)},fail:function(){},complete:function(t){console.log(t)}})},mixins:[l.utilMixins],computed:d(d(d(d(d({},(0,u.mapState)(["sjxx","sjgood"])),(0,u.mapState)("dndc",["latLng"])),(0,u.mapMutations)(["setNoLogin"])),(0,u.mapState)({storeBasicSetting:function(t){return t.config.storeBasicSetting},orSet:function(t){return t.config.orderSetting},scarList:function(t){return t.scarList.out||[]},scarListIns:function(t){return t.scarList.ins||[]}})),{},{getProductSelectedMaterials:function(){if(this.ginfo.materialSwitch&&this.ginfo.materialData){var t=[];return this.ginfo.materialData.forEach((function(e){var n=e.materialList;n.forEach((function(e){e.a&&t.push("".concat(e.name).concat(e.num>1?"*"+e.num:""))}))})),t.length?t.join(","):""}return""},xzJlInfo:function(){var t={money:0,arr:[]};if(1==this.ginfo.materialSwitch&&this.ginfo.materialData.length){var e=[];this.ginfo.materialData.forEach((function(t){var n=t.materialList;n.forEach((function(t){t.a&&e.push(t)}))})),t.arr=e}return t},xzSxInfo:function(){var t={arr:[]};if(1==this.ginfo.attrSwitch&&this.ginfo.attrData.length){var e=this.ginfo.attrData,n=[];for(var a in e)for(var i in e[a].value)e[a].value[i].a&&n.push(e[a].value[i]);t.arr=n}return t},xzSpecInfo:function(){var t={ggdata:[],specInfo:{}};if(1==this.ginfo.specSwitch&&this.ginfo.specData.length){var e=this.ginfo.specData,n=[],a=[];for(var i in e)for(var r in e[i].value)if(e[i].value[r].a){a.push(e[i].value[r].name),n.push(e[i].value[r].id);break}return t.ggdata=a.toString(),t.specInfo=this.ginfo.skus.find((function(t){return t.specName.length&&t.specName[0].id==n})),t}return{}},xzTcInfo:function(){var t={money:0,arr:[],tcdata:[],fc:[],xz:[]};if(2==this.ginfo.type&&this.ginfo.setmealData&&this.ginfo.setmealData.fix.length&&this.ginfo.setmealData.fix.forEach((function(e){var n=e.goods;n.forEach((function(e){e.type=1,t.arr.push(e),t.fc.push("".concat(e.name,"*").concat(e.num||1," ").concat(e.g&&e.g.attribute||""," ").concat(e.g&&e.g.jldata||""))}))})),2==this.ginfo.type&&this.ginfo.setmealData&&this.ginfo.setmealData.match.length){this.ginfo.setmealData.match.forEach((function(e){var n=e.goods;n.forEach((function(e){e.a&&(e.type=2,t.arr.push(e),t.fc.push("".concat(e.name,"*").concat(e.num||1," ").concat(e.g&&e.g.attribute||""," ").concat(e.g&&e.g.jldata||"")),t.xz.push(e))}))})),t.tcdata=t.fc.join("+")}return t},mrtxImg:function(){return"".concat(this.onImgurl,"index/menupopup_btn_share_normal.png")}}),methods:d(d({},(0,u.mapActions)(["clearMycar","getConfig","getSjxx","supdCar","supInCar"])),{},{load:function(){var t=this;return(0,s.default)(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getLoginInfo();case 2:return t.getGoodsDl(),e.next=5,t.getDw();case 5:return e.next=7,t.getSjxx({storeId:t.storeId,lat:t.lc.latitude||"",lng:t.lc.longitude||""});case 7:t.getConfig({ident:["storeBasicSetting","orderSetting"]});case 8:case"end":return e.stop()}}),e)})))()},loadIns:function(){var t=this;return(0,s.default)(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getLoginInfo();case 2:return t.getGoodsDlIns(),e.next=5,t.getDw();case 5:return e.next=7,t.getSjxx({storeId:t.storeId,lat:t.lc.latitude||"",lng:t.lc.longitude||""});case 7:t.getConfig({ident:["storeBasicSetting","orderSetting"]});case 8:case"end":return e.stop()}}),e)})))()},getDw:function(){var t=this;return(0,s.default)(r.default.mark((function e(){var n;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getDw)({t:0});case 2:n=e.sent,t.lc=n;case 4:case"end":return e.stop()}}),e)})))()},getGoodsDl:function(){var t=this;return(0,s.default)(r.default.mark((function e(){var n,a;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.util.request({url:"".concat(t.api.goods,"/").concat(t.goodId),data:{storeId:t.storeId,diningType:t.diningType}});case 2:n=e.sent,a=n.data,t.product(a),t.havebxp=a.category.findIndex((function(t){return 1==t.isMust}))>-1;case 6:case"end":return e.stop()}}),e)})))()},getGoodsDlIns:function(){var t=this;return(0,s.default)(r.default.mark((function e(){var n,a;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.util.request({url:"".concat(t.api.ingoods,"/").concat(t.goodId),data:{storeId:t.storeId,diningType:t.diningType}});case 2:n=e.sent,a=n.data,t.product(a),t.havebxp=a.category.findIndex((function(t){return 1==t.isMust}))>-1;case 6:case"end":return e.stop()}}),e)})))()},product:function(t){var e=this;1==t.specSwitch&&t.specData&&t.specData.forEach((function(e){e.value=e.value.map((function(e,n){var a=t.skus.find((function(t){return t.specName[0].id==e.id})).surplusInventory;return{name:e.name,id:e.id,price:t.skus.find((function(t){return t.specName[0].id==e.id})).price,a:a&&e.checkId?1:0,b:t.skus.find((function(t){return t.specName[0].id==e.id})).surplusInventory}}))})),1==t.attrSwitch&&t.attrData&&t.attrData.forEach((function(t){t.value.forEach((function(t,e){t.a=t.checkId?1:0}))})),1==t.materialSwitch&&t.materialData&&(this.havebxjl=t.materialData.findIndex((function(t){return 1==t.required}))>-1,t.materialData.forEach((function(t){t.materialList.forEach((function(t,e){t.a=t.inventory&&t.checkId?1:0,t.b=t.inventory,t.num=t.checkId?1:0}))}))),setTimeout((function(){e.comPrice()}),500),this.ginfo=JSON.parse(JSON.stringify(t)),this.ginfo.content=t.content&&t.content.content?t.content.content:""},clickSpec:function(t,e,n){if(n.b){var a=this.ginfo.specData;for(var i in a[t].value)i==e?this.$set(a[t].value[i],"a",1):this.$set(a[t].value[i],"a",0)}},clickAttribute:function(t,e){var n=this.ginfo.attrData;for(var a in n[t].value)n[t].state&&1==n[t].state?a==e&&this.$set(n[t].value[a],"a",1==n[t].value[a].a?0:1):a==e?this.$set(n[t].value[a],"a",1):this.$set(n[t].value[a],"a",0)},clickMaterial:function(t,e,n){if(n.b){var a=this.ginfo.materialData;for(var i in a[t].materialList)1==a[t].required&&a[t].maxNum<=1?i==e?(this.$set(a[t].materialList[i],"a",1),this.$set(a[t].materialList[i],"num",1)):(this.$set(a[t].materialList[i],"a",0),this.$set(a[t].materialList[i],"num",1)):i!=e||a[t].materialList[i].num||(this.$set(a[t].materialList[i],"a",1==a[t].materialList[i].a?0:1),this.$set(a[t].materialList[i],"num",1==a[t].materialList[i].num?0:1));this.comPrice()}},addMaterial:function(t,e){var n=this.ginfo.materialData;for(var a in n[t].materialList)a==e&&(n[t].materialList[e].a||this.$set(n[t].materialList[a],"a",1),this.$set(n[t].materialList[a],"num",n[t].materialList[a].num+1));this.comPrice()},minusMaterial:function(t,e){var n=this.ginfo.materialData;for(var a in n[t].materialList)if(a==e){if(!n[t].materialList[a].a)return;n[t].materialList[a].num>1?this.$set(n[t].materialList[a],"num",n[t].materialList[a].num-1):(n[t].materialList[a].num=1)?(this.$set(n[t].materialList[a],"num",0),this.$set(n[t].materialList[a],"a",0)):this.util.message("不能再少了",3)}this.comPrice()},countjl:function(){var t=this;return new Promise((function(e,n){var a=t.ginfo.materialSwitch,i=t.ginfo.materialData;1==a&&i?i.forEach((function(a){a.required&&!t.xzJlInfo.arr.find((function(t){return t.category.id==a.id}))?(t.util.message("".concat(a.name,"必选"),3),n()):e()})):e()}))},cNum:function(){this.cnum<=0&&(this.cnum=1),this.cnum>=999999&&(this.cnum=999999)},add:function(){this.cnum=parseInt(this.cnum)+1,this.comPrice()},minus:function(){1!=this.cnum&&(this.cnum=parseInt(this.cnum)-1,this.comPrice())},addToCart:function(){var t=this;return(0,s.default)(r.default.mark((function e(){var n,a,i,s,c,u,l,g;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(2!=t.ginfo.type||!t.ginfo.setmealData||!t.ginfo.setmealData.match){e.next=5;break}if(n=t.ginfo.setmealData.match.reduce((function(t,e){return t+e.select}),0),a=t.xzTcInfo.xz.reduce((function(t,e){return t+e.num}),0),!(a<n)){e.next=5;break}return e.abrupt("return",t.util.message("请选择可选搭配",3));case 5:if(t.butType=2,i=Object.assign({},t.xzSpecInfo),s={jlmoney:t.xzJlInfo.money,material:t.xzJlInfo.arr.map((function(t){return{id:t.id,name:t.name,num:t.num||1}})),jldata:"",jlids:""},c={attribute:""},u={setMealData:t.xzTcInfo.arr.map((function(t){return{id:t.id,name:t.name,num:t.num||1,price:t.addPrice,logo:t.logo,specMd5:t.specMd5,attrData:t.g?t.g.specMd5?t.g.attrData:t.g.specSwitch||t.g.attrSwitch||t.g.materialSwitch?{spec:t.g.specSwitch&&t.g.ggdata?t.g.ggdata:"",attr:t.g.attribute,matal:t.g.jldata,material:t.g.material}:{}:{}}})),tcdata:""},console.log(1,t.xzJlInfo,t.xzSxInfo,t.xzSpecInfo,t.xzTcInfo),c.attribute=t.xzSxInfo.arr.map((function(t){return t.name})).toString(),s.jldata=t.xzJlInfo.arr.map((function(t){return"".concat(t.name).concat(t.num>1?"*"+t.num:"")})).toString(),s.jlids=t.xzJlInfo.arr.map((function(t){return t.id})).toString(),u.tcdata=t.xzTcInfo.arr.map((function(t){return"".concat(t.name).concat(t.num>1?"*"+t.num:"")})).toString(),!t.havebxjl){e.next=16;break}if(l=function(){for(var e=t.ginfo.materialData.filter((function(t){return 1==t.required})),n=0,a=s.material.map((function(t){return t.id})),i=0;i<e.length;i++)e[i].materialList.find((function(t){return a.includes(t.id)}))&&(n+=1);if(n<e.length)return{v:t.util.message("请选择必选加料",3,1500)}}(),"object"!==(0,o.default)(l)){e.next=16;break}return e.abrupt("return",l.v);case 16:g=Object.assign({ggnum:t.ginfo.ggnum},t.ginfo,i,c,s,u),"ins"==t.dType?t.handcarIns({g:g,addwz:t.cnum>1?t.cnum:1}):t.handcar({g:g,addwz:t.cnum>1?t.cnum:1}),t.cnum=1;case 19:case"end":return e.stop()}}),e)})))()},handcar:function(t){var e=this;return(0,s.default)(r.default.mark((function n(){var a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("p",t),n.prev=1,n.next=4,e.supdCar({storeId:e.storeId,spuId:t.g.id,specMd5:t.g.specSwitch?t.g.specInfo&&t.g.specInfo.specMd5:t.g.specMd5||t.g.singleSpec.specMd5,attrData:t.g.specMd5?t.g.attrData:t.g.specSwitch||t.g.attrSwitch||t.g.materialSwitch?{spec:t.g.specSwitch&&t.g.ggdata?t.g.ggdata:"",attr:t.g.attribute,matal:t.g.jldata,material:t.g.material}:{},setMealData:2==t.g.type&&t.g.setMealData?t.g.setMealData:[],num:t.addwz,lat:e.lc.latitude||"",lng:e.lc.longitude||"",diningType:e.diningType});case 4:a=n.sent,a&&(2==e.butType?e.go({t:5,url:"/pages/index/goods"}):1==e.butType&&e.scarList&&e.scarList.goodsCount&&e.pay()),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](1),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()},handcarIns:function(t){var e=this;return(0,s.default)(r.default.mark((function n(){var a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("pp",t),n.prev=1,n.next=4,e.supInCar({storeId:e.storeId,spuId:t.g.id,specMd5:t.g.specSwitch?t.g.specInfo&&t.g.specInfo.specMd5:t.g.specMd5||t.g.singleSpec.specMd5,attrData:t.g.specMd5?t.g.attrData:t.g.specSwitch||t.g.attrSwitch||t.g.materialSwitch?{spec:t.g.specSwitch&&t.g.ggdata?t.g.ggdata:"",attr:t.g.attribute,matal:t.g.jldata,material:t.g.material}:{},setMealData:2==t.g.type&&t.g.setMealData?t.g.setMealData:[],num:t.addwz,lat:e.lc.latitude||"",lng:e.lc.longitude||"",diningType:e.diningType,tableId:e.tableId});case 4:a=n.sent,a&&(2==e.butType?e.go({t:5,url:"/pages/shop/in/goods?storeId=".concat(e.storeId,"&diningType=").concat(e.diningType,"&tableId=").concat(e.tableId)}):1==e.butType&&e.scarListIns&&e.scarListIns.goodsCount&&(4==e.diningType&&0==e.scarListIns.tables.state?e.go({t:5,url:"/pages/shop/in/goods?storeId=".concat(e.storeId,"&diningType=").concat(e.diningType,"&tableId=").concat(e.tableId)}):e.payIns())),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](1),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()},tchanddl:function(t,e,n,a){var i=this;return(0,s.default)(r.default.mark((function o(){var s,c,u,l;return r.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:console.log(a),i.sPi=t,i.sCi=n,i.sPv=e,s=i.ginfo.setmealData&&i.ginfo.setmealData.match&&1==e.type?i.ginfo.setmealData.fix:i.ginfo.setmealData.match,o.t0=r.default.keys(s[t].goods);case 5:if((o.t1=o.t0()).done){o.next=13;break}if(c=o.t1.value,u=s[t].goods.reduce((function(t,e){return t+e.num}),1),c!=n){o.next=11;break}if(!(u>s[t].select&&2==e.type)){o.next=11;break}return o.abrupt("return",i.util.message("不能再加了",3,1500));case 11:o.next=5;break;case 13:return o.next=15,i.util.request({url:"".concat(i.api.goods,"/").concat(a.spuId),data:{storeId:i.storeId,diningType:i.diningType}});case 15:l=o.sent,i.tcproduct=l.data,i.productModalVisible=!0,i.$refs["productModal"].open(l.data,i.storeId,i.diningType);case 19:case"end":return o.stop()}}),o)})))()},handleAddToCartInModal:function(t){var e=this.sPi,n=this.sCi,a=this.sPv,i=this.ginfo.setmealData&&this.ginfo.setmealData.match&&1==a.type?this.ginfo.setmealData.fix:this.ginfo.setmealData.match;for(var r in i[e].goods)r==n&&(this.$set(i[e].goods[r],"g",t.g),2==a.type&&(this.$set(i[e].goods[r],"num",1),this.$set(i[e].goods[r],"a",1)));this.comPrice(),this.closeProductDetailModal()},closeProductDetailModal:function(){var t=this;this.productModalVisible=!1,this.$refs["productModal"].close(),setTimeout((function(){t.product={}}),100)},tchandcar:function(t,e,n,a){var i=this.ginfo.setmealData&&this.ginfo.setmealData.match;for(var r in i[e].goods){var o=i[e].goods.reduce((function(t,e){return t+e.num}),t.addwz);if(r==n){if(o>i[e].select&&t.addwz>=1)return this.util.message("不能再加了",3,1500);this.$set(i[e].goods[r],"num",i[e].goods[r].num=parseInt(i[e].goods[r].num)+t.addwz),this.$set(i[e].goods[r],"a",o<1?0:1)}}this.comPrice()},stcGoods:function(t,e,n,a){var i=this.ginfo.setmealData&&this.ginfo.setmealData.match;for(var r in i[t].goods){var o=i[t].goods.reduce((function(t,e){return t+e.num}),1);if(r==n){if(o>i[t].select)return i[t].goods[r].num?(this.$set(i[t].goods[r],"a",0),void this.$set(i[t].goods[r],"num",0)):this.util.message("不能再加了",3,1500);a.isSpec?this.tchanddl(t,e,n,a):(this.$set(i[t].goods[r],"num",1==i[t].goods[r].num?0:1),this.$set(i[t].goods[r],"a",1==i[t].goods[r].a?0:1))}}this.comPrice()},tcClose:function(t){for(var e=this.ginfo.setmealData&&this.ginfo.setmealData.match,n=0;n<e.length;n++)for(var a=0;a<e[n].goods.length;a++)e[n].goods[a].spuId==t.spuId&&(this.$set(e[n].goods[a],"a",0),this.$set(e[n].goods[a],"num",0))},tchandcars:function(t,e){for(var n=this.ginfo.setmealData&&this.ginfo.setmealData.match,a=0;a<n.length;a++)for(var i=0;i<n[a].goods.length;i++){var r=n[a].goods.reduce((function(t,e){return t+e.num}),t.addwz);if(n[a].goods[i].spuId==e.spuId){if(r>n[a].select&&t.addwz>=1)return this.util.message("不能再加了",3,1500);this.$set(n[a].goods[i],"num",n[a].goods[i].num=parseInt(n[a].goods[i].num)+t.addwz)}}this.comPrice()},tchanddls:function(t){var e=this;return(0,s.default)(r.default.mark((function n(){var a,i,o,s;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(a=e.ginfo.setmealData&&e.ginfo.setmealData.match&&1==t.type?e.ginfo.setmealData.fix:e.ginfo.setmealData.match,i=0;i<a.length;i++)for(a[i].id==t.setmealGoodsId&&(e.sPi=i,e.sPv=a[i]),o=0;o<a[i].goods.length;o++)a[i].goods[o].spuId==t.spuId&&(e.sCi=o);return n.next=4,e.util.request({url:"".concat(e.api.goods,"/").concat(t.spuId),data:{storeId:e.storeId,diningType:e.diningType}});case 4:s=n.sent,e.tcproduct=s.data,e.productModalVisible=!0,e.$refs["productModal"].open(s.data,e.storeId,e.diningType);case 8:case"end":return n.stop()}}),n)})))()},addBuyNow:function(){var t=this;return(0,s.default)(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.clearMycar({storeId:t.sjxx.id});case 2:return e.next=4,t.addToCart();case 4:t.butType=1;case 5:case"end":return e.stop()}}),e)})))()},pay:function(){var t=this;return(0,s.default)(r.default.mark((function e(){var n;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isLogin||t.noLogin){e.next=3;break}return t.$refs["sqBtn"].open(),e.abrupt("return");case 3:if(n=t.sjxx.storeSetting,n&&(1==n.pickupSwitch||1==n.takeoutSwitch)){e.next=7;break}return t.util.message("门店暂无下单渠道",3,2e3),e.abrupt("return");case 7:if(!t.havebxp){e.next=9;break}return e.abrupt("return",t.util.message("请添加必选商品",3,1500));case 9:a.navigateTo({url:"/pages/shop/out/pay-order?diningType=".concat(1==t.diningType?t.sjxx&&t.sjxx.storeSetting.defaultType:t.diningType)});case 10:case"end":return e.stop()}}),e)})))()},payIns:function(){var t=this;return(0,s.default)(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isLogin||t.noLogin){e.next=3;break}return t.$refs["sqBtn"].open(),e.abrupt("return");case 3:if(!t.havebxp){e.next=5;break}return e.abrupt("return",t.util.message("请添加必选商品",3,1500));case 5:t.go({t:1,url:"/pages/shop/in/pay-order?tableId=".concat(t.tableId,"&diningType=").concat(t.diningType)});case 6:case"end":return e.stop()}}),e)})))()},comPrice:function(){var t=this;return(0,s.default)(r.default.mark((function e(){var n;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.util.request({url:"ins"==t.dType?t.api.sPrice:t.api.cPrice,method:"POST",ct:1,data:{storeId:t.sjxx.id||t.storeId,specMd5:t.ginfo.specSwitch?t.xzSpecInfo.specInfo&&t.xzSpecInfo.specInfo.specMd5:t.ginfo.singleSpec&&t.ginfo.singleSpec.specMd5,attrData:t.ginfo.specSwitch||t.ginfo.attrSwitch||t.ginfo.materialSwitch?{spec:t.ginfo.specSwitch&&t.xzSpecInfo.ggdata?t.xzSpecInfo.ggdata:"",attr:t.xzSxInfo.arr.map((function(t){return t.name})).toString(),matal:t.xzJlInfo.arr.map((function(t){return"".concat(t.name).concat(t.num>1?"*"+t.num:"")})).toString(),material:t.xzJlInfo.arr.map((function(t){return{id:t.id,name:t.name,num:t.num||1}}))}:{},setMealData:2==t.ginfo.type&&t.xzTcInfo&&t.xzTcInfo.arr.map((function(t){return{id:t.id,name:t.name,num:t.num||1,price:t.addPrice,logo:t.logo,specMd5:t.specMd5,attrData:t.g?t.g.specMd5?t.g.attrData:t.g.specSwitch||t.g.attrSwitch||t.g.materialSwitch?{spec:t.g.specSwitch&&t.g.ggdata?t.g.ggdata:"",attr:t.g.attribute,matal:t.g.jldata,material:t.g.material}:{}:{}}})),spuId:t.ginfo.id,num:t.cnum,diningType:t.diningType}});case 2:n=e.sent,t.jsPrice=n?n.data&&n.data.money:"",t.jslinePrice=n?n.data&&n.data.sellMoney:"",t.jsDiscountLabel=n?n.data&&n.data.discountLabel:"";case 6:case"end":return e.stop()}}),e)})))()},yl:function(t){var e=[];e.push(t),this.util.preImg({idx:0,urls:e})},ylsw:function(t){this.util.preImg({idx:t,urls:this.ginfo.images})}}),onShareAppMessage:function(){var t="pages/index/goods?goodId=".concat(this.goodId,"&storeId=").concat(this.storeId,"&tableId=").concat(this.tableId,"&diningType=").concat(this.diningType,"&dType=").concat(this.dType);return this.util.mpShare({t:this.ginfo&&this.ginfo.name,i:this.getImgS(this.ginfo&&this.ginfo.logo),p:t})}};e.default=p}).call(this,n("3223")["default"],n("df3c")["default"])},"4fa5":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.ginfo.images&&t.ginfo.images.length),a=t.__map(t.ginfo.label,(function(e,n){var a=t.__get_orig(e),i=t.cTR(e.bgColor||"#BABABA");return{$orig:a,m0:i}})),i=0==t.ginfo.specSwitch&&t.ginfo.discounts&&t.ginfo.discounts.length||1==t.ginfo.specSwitch&&t.jsDiscountLabel,r=1==t.ginfo.type?1==t.ginfo.specSwitch&&t.ginfo.specData.length:null,o=1==t.ginfo.type?1==t.ginfo.attrSwitch&&t.ginfo.attrData.length:null,s=1==t.ginfo.type?1==t.ginfo.materialSwitch&&t.ginfo.materialData.length:null,c=1==t.ginfo.type&&s?t.__map(t.ginfo.materialData,(function(e,n){var a=t.__get_orig(e),i=t.__map(e.materialList,(function(n,a){var i=t.__get_orig(n),r=1==e.required&&e.maxNum<=1&&n.price?parseFloat(n.price):null,o=1==e.required&&e.maxNum<=1||!n.b?null:n.price&&parseFloat(n.price);return{$orig:i,m1:r,m2:o}}));return{$orig:a,l1:i}})):null,u=2==t.ginfo.type&&t.ginfo.setmealData?t.ginfo.setmealData.fix.length:null,l=2==t.ginfo.type&&t.ginfo.setmealData?t.ginfo.setmealData.match.length:null,g=2==t.ginfo.type&&t.ginfo.setmealData&&l?t.__map(t.ginfo.setmealData.match,(function(e,n){var a=t.__get_orig(e),i=e.goods&&e.goods.length;return{$orig:a,g7:i}})):null,f=1!=t.ginfo.isShow&&(!t.ginfo.specSwitch&&t.ginfo.singleSpec&&0!=t.ginfo.singleSpec.surplusInventory||t.ginfo.specSwitch&&!t.ginfo.singleSpec)?0==t.ginfo.specSwitch&&t.ginfo.singleSpec.price&&t.ginfo.singleSpec.linePrice>0&&Number(t.ginfo.singleSpec.linePrice)>Number(t.ginfo.singleSpec.price):null,d=1!=t.ginfo.isShow&&(!t.ginfo.specSwitch&&t.ginfo.singleSpec&&0!=t.ginfo.singleSpec.surplusInventory||t.ginfo.specSwitch&&!t.ginfo.singleSpec)&&f?parseFloat(t.ginfo.singleSpec.linePrice):null,p=1!=t.ginfo.isShow&&(!t.ginfo.specSwitch&&t.ginfo.singleSpec&&0!=t.ginfo.singleSpec.surplusInventory||t.ginfo.specSwitch&&!t.ginfo.singleSpec)?1==t.ginfo.specSwitch&&t.jslinePrice>0&&t.jsPrice&&Number(t.jslinePrice)>Number(t.jsPrice):null,m=1!=t.ginfo.isShow&&(!t.ginfo.specSwitch&&t.ginfo.singleSpec&&0!=t.ginfo.singleSpec.surplusInventory||t.ginfo.specSwitch&&!t.ginfo.singleSpec)?t.xzSxInfo.arr&&t.xzSxInfo.arr.length:null,h=1!=t.ginfo.isShow&&(!t.ginfo.specSwitch&&t.ginfo.singleSpec&&0!=t.ginfo.singleSpec.surplusInventory||t.ginfo.specSwitch&&!t.ginfo.singleSpec)&&m?t.xzSxInfo.arr.map((function(t){return t.name})).join():null,v=1!=t.ginfo.isShow&&(!t.ginfo.specSwitch&&t.ginfo.singleSpec&&0!=t.ginfo.singleSpec.surplusInventory||t.ginfo.specSwitch&&!t.ginfo.singleSpec)&&2==t.ginfo.type?t.xzTcInfo&&t.xzTcInfo.arr&&t.xzTcInfo.arr.length:null;t._isMounted||(t.e0=function(e){t.tcShow=!t.tcShow}),t.$mp.data=Object.assign({},{$root:{g0:n,l0:a,g1:i,g2:r,g3:o,g4:s,l2:c,g5:u,g6:l,l3:g,m3:f,m4:d,m5:p,g8:m,g9:h,g10:v}})},i=[]},"99e8":function(t,e,n){"use strict";(function(t,e){var a=n("47a9");n("b483");a(n("3240"));var i=a(n("b2b3"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},af2a:function(t,e,n){"use strict";var a=n("fd0b"),i=n.n(a);i.a},b2b3:function(t,e,n){"use strict";n.r(e);var a=n("4fa5"),i=n("c7c5");for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("af2a");var o=n("828b"),s=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"ede13c26",null,!1,a["a"],void 0);e["default"]=s.exports},c7c5:function(t,e,n){"use strict";n.r(e);var a=n("2a59"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},fd0b:function(t,e,n){}},[["99e8","common/runtime","common/vendor"]]]);