(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/card"],{1836:function(e,t,a){"use strict";a.r(t);var n=a("8a1b"),r=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=r.a},"4fe5":function(e,t,a){},"741f":function(e,t,a){"use strict";a.r(t);var n=a("76c2"),r=a("1836");for(var o in r)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(o);a("ae0f");var s=a("828b"),i=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,"5cc128ca",null,!1,n["a"],void 0);t["default"]=i.exports},"76c2":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=(e._self._c,e.$t("chooseAvatar.user_nickname")),n=e.$t("chooseAvatar.enter_user_nickname"),r=e.$t("chooseAvatar.mobile_number"),o=e.$t("chooseAvatar.enter_mobile"),s=e.$t("chooseAvatar.requestopt"),i=e.time<=0?null:e.$t("sq-btn.sent"),c=e.$t("chooseAvatar.enteropt"),u=e.$t("chooseAvatar.enter_code"),l=e.$t("chooseAvatar.real_name"),f=e.$t("chooseAvatar.enter_realName"),d=e.$t("chooseAvatar.gender"),m=e.$t("chooseAvatar.birthday"),h=e.birthday?null:e.params.birthday||e.$t("chooseAvatar.birthday_once_modified")+"，"+e.$t("chooseAvatar.cannot_edit_again"),p=e.$t("chooseAvatar.claim_card");e.$mp.data=Object.assign({},{$root:{m0:a,m1:n,m2:r,m3:o,m4:s,m5:i,m6:c,m7:u,m8:l,m9:f,m10:d,m11:m,m12:h,m13:p}})},r=[]},"8a1b":function(e,t,a){"use strict";(function(e){var n=a("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("7eb4")),o=n(a("7ca3")),s=n(a("ee10")),i=a("8f59"),c=n(a("77a5")),u=n(a("5137")),l=a("d468");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={components:{sqBtn:function(){Promise.all([a.e("common/vendor"),a.e("components/common/sq-btn")]).then(function(){return resolve(a("c52b"))}.bind(null,a)).catch(a.oe)},mgRadio:function(){a.e("components/form/my-radio").then(function(){return resolve(a("2c44"))}.bind(null,a)).catch(a.oe)}},name:"chooseAcatar",data:function(){return{loading:!1,avatarUrl:"https://www.vdamo.com/storage/default/home/avata.png",baseData:"",nickname:"",userId:"",userMobile:"",isuserMobile:!1,email:"",time:0,btntxt:this.$t("chooseAvatar.send_verification_code"),isSending:!1,params:{userId:"",userTel:"",email:"",birthday:"2000-01-01",sex:1,realName:"",createdAt:""},sexArr:[{value:1,name:this.$t("chooseAvatar.male")},{value:2,name:this.$t("chooseAvatar.female")}],birthday:""}},onLoad:function(){var e=this;return(0,s.default)(r.default.mark((function t(){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.util.setNT(e.$t("chooseAvatar.personal_info"));case 1:case"end":return t.stop()}}),t)})))()},computed:{hToken:function(){return"Bearer ".concat(e.getStorageSync("token"))},appType:function(){return u.default.platform},startDate:function(){return this.getDate("start")},endDate:function(){return this.getDate("end")}},mixins:[l.utilMixins],methods:d(d(d({},(0,i.mapActions)(["getConfig"])),(0,i.mapMutations)(["setMobile","setToken","setUser"])),{},{onChooseAvatar:function(e){console.log("e",e),this.avatarUrl=e.detail.avatarUrl},isValidDateTime:function(e){var t=new Date(e);return t instanceof Date&&!isNaN(t)},onInput:function(e){console.log(e),this.nickname=e.detail.value},sqsjh:function(){this.$refs["sqBtn"].open()},bindDateChange:function(e){var t=this;return(0,s.default)(r.default.mark((function a(){return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.log(e),t.params.birthday=e.target.value;case 2:case"end":return a.stop()}}),a)})))()},getDate:function(e){var t=new Date,a=t.getFullYear(),n=t.getMonth()+1,r=t.getDate();return"start"===e?a-=60:"end"===e&&(a+=2),n=n>9?n:"0"+n,r=r>9?r:"0"+r,"".concat(a,"-").concat(n,"-").concat(r)},timer:function(){this.time>0?(this.time--,this.btntxt=this.time+this.$t("sq-btn.seconds"),setTimeout(this.timer,1e3)):(this.time=0,this.btntxt=this.$t("sq-btn.send_verification_code"))},sendcode:function(){var e=this;return(0,s.default)(r.default.mark((function t(){var a,n;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.params.userTel.length<7)){t.next=2;break}return t.abrupt("return",e.util.message(e.$t("registration.enter_phone_number"),3));case 2:return a=e.params.userTel,a=e.params.userTel.startsWith("+66")?e.params.userTel:e.params.userTel.startsWith("66")?"+66"+e.params.userTel.slice(2):"+66"+e.params.userTel,e.isSending=!0,t.next=7,e.util.request({url:e.api.sendRegisterCode,method:"POST",mask:e.$t("password_reset.sending"),data:{phone:a,type:1}});case 7:n=t.sent,e.isSending=!1,console.log("1212",n),n&&200==n.code&&(e.time=60,e.timer());case 11:case"end":return t.stop()}}),t)})))()},cmb:function(t){var a=this;return(0,s.default)(r.default.mark((function n(){var o,i,u;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log("mpGetphonenumber",t),"getPhoneNumber:ok"!=t.detail.errMsg){n.next=8;break}a.loading=!0,o=getApp().globalData.session_key,i=t.detail.encryptedData,u=t.detail.iv,a.util.request({url:a.api.jm,method:"POST",data:{sessionKey:o,data:i,iv:u}}).then(function(){var t=(0,s.default)(r.default.mark((function t(n){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a.loading=!1,!n.data.phoneNumber){t.next=9;break}return a.setMobile(n.data.phoneNumber),e.setStorageSync("userTel",n.data.phoneNumber),t.next=6,a.util.request({url:a.api.gxmb,method:"post",data:{mobile:n.data.phoneNumber}}).then(function(){var e=(0,s.default)(r.default.mark((function e(t){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("rest",t),a.setToken(t.data.token),a.setUser(t.data.userInfo),a.util.message(t.msg||a.$t("chooseAvatar.registration_successful"),1,1e3),c.default.swnb(1e3);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){a.loading=!1}));case 6:t.sent,t.next=10;break;case 9:console.log(n);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){a.loading=!1})),console.log(o,i,u),n.next=11;break;case 8:return a.loading=!1,e.showModal({title:a.$t("chooseAvatar.warm_reminder"),content:a.$t("chooseAvatar.authorized_mobile_number_failed"),showCancel:!1,confirmText:i18n.t("modal.confirm")}),n.abrupt("return");case 11:case"end":return n.stop()}}),n)})))()},save:function(){var e=this;return(0,s.default)(r.default.mark((function t(){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.params.userTel){t.next=3;break}return e.util.message(e.$t("chooseAvatar.please_authorize_mobile_number"),3,2e3),t.abrupt("return");case 3:if(e.params.birthday){t.next=6;break}return e.util.message(e.$t("chooseAvatar.please_birthday"),3,2e3),t.abrupt("return");case 6:e.params.userTel,e.params.userTel.startsWith("+66")?e.params.userTel:e.params.userTel.startsWith("66")?"+66"+e.params.userTel.slice(2):"+66"+e.params.userTel;case 8:case"end":return t.stop()}}),t)})))()},handleAvatarSuccess2:function(e){this.avatarUrl=e.data},ckxz:function(){this.go({t:1,url:"/pages/my/other/gywm?t=活动说明&p=7"})},ckzl:function(){this.go({t:1,url:"/pages/my/other/gywm?t=活动说明&p=8"})},djsr:function(){this.util.message(this.$t("chooseAvatar.birthday_cannot_be_modified"),3,2e3)}})};t.default=m}).call(this,a("df3c")["default"])},ae0f:function(e,t,a){"use strict";var n=a("4fe5"),r=a.n(n);r.a},fb8f:function(e,t,a){"use strict";(function(e,t){var n=a("47a9");a("b483");n(a("3240"));var r=n(a("741f"));e.__webpack_require_UNI_MP_PLUGIN__=a,t(r.default)}).call(this,a("3223")["default"],a("df3c")["createPage"])}},[["fb8f","common/runtime","common/vendor"]]]);