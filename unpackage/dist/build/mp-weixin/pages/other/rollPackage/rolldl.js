(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/other/rollPackage/rolldl"],{"02a9":function(e,t,n){"use strict";(function(e,t){var r=n("47a9");n("b483");r(n("3240"));var a=r(n("7db2"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"0a9f":function(e,t,n){"use strict";(function(e){var r=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("7eb4")),o=r(n("7ca3")),c=r(n("ee10")),u=n("8f59"),i=n("cc12"),s=n("d468");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={name:"roll-dl",components:{myCoupon:function(){Promise.all([n.e("common/vendor"),n.e("components/common/my-coupon")]).then(function(){return resolve(n("0c65"))}.bind(null,n)).catch(n.oe)},sqBtn:function(){Promise.all([n.e("common/vendor"),n.e("components/common/sq-btn")]).then(function(){return resolve(n("c52b"))}.bind(null,n)).catch(n.oe)},Pay:function(){Promise.all([n.e("common/vendor"),n.e("components/pay/pay")]).then(function(){return resolve(n("1e12"))}.bind(null,n)).catch(n.oe)}},data:function(){return{storeInfo:{},pdl:{},show:!1}},onLoad:function(e){var t=this;return(0,c.default)(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(e&&e.storeId&&e.id)){n.next=7;break}t.storeId=e.storeId,t.id=e.id,t.init(),t.getStore(),n.next=12;break;case 7:if(!e||!e.id||e.storeId){n.next=12;break}return t.id=e.id,n.next=11,t.gDw();case 11:t.init();case 12:t.util.setNT("券包详情");case 13:case"end":return n.stop()}}),n)})))()},computed:d({},(0,u.mapState)(["sjxx"])),mixins:[s.utilMixins],onShow:function(){var t=this;return(0,c.default)(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.getStorageSync("rStoreInfo")&&(t.storeInfo=e.getStorageSync("rStoreInfo"),t.load(t.storeInfo.id));case 1:case"end":return n.stop()}}),n)})))()},methods:d(d({},(0,u.mapActions)(["getSjxx"])),{},{init:function(){var e=this;return(0,c.default)(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getLoginInfo();case 2:e.getLayout(),e.getInfo();case 4:case"end":return t.stop()}}),t)})))()},load:function(t){var n=this;return(0,c.default)(a.default.mark((function r(){return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t&&e.removeStorageSync("rStoreInfo"),n.init();case 2:case"end":return r.stop()}}),r)})))()},gDw:function(){var e=this;return(0,c.default)(a.default.mark((function t(){var n,r;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.storeInfo||!e.storeInfo.id){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,(0,i.getDw)({t:0});case 6:return n=t.sent,e.lc=n,t.next=10,e.getAddInfo(n);case 10:return t.next=12,e.util.request({url:e.api.dplb,data:{lat:n.latitude||"",lng:n.longitude||"",recharge:1}});case 12:r=t.sent,e.storeInfo=r.data&&r.data.list&&r.data.list[0];case 14:case"end":return t.stop()}}),t)})))()},getStore:function(){var e=this;return(0,c.default)(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.storeInfo=e.sjxx;case 1:case"end":return t.stop()}}),t)})))()},goSelect:function(){e.navigateTo({url:"/pages/shop/select/index?page=recharge"})},getInfo:function(){var e=this;return(0,c.default)(a.default.mark((function t(){var n,r;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.util.request({url:"".concat(e.api.couponPack,"/").concat(e.id),mask:"加载中",data:{storeId:e.storeId?e.storeId:""}});case 2:n=t.sent,r=n.data,r&&(e.pdl=r||{});case 5:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return(0,c.default)(a.default.mark((function t(){var n;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isLogin){t.next=3;break}return e.$refs["sqBtn"].open(),t.abrupt("return");case 3:if(!(1==e.pdl.inventoryType&&e.pdl.inventory<=0)){t.next=5;break}return t.abrupt("return",e.util.message("库存不足",3,2e3));case 5:return e.loading=!0,t.next=8,e.util.request({url:e.api.couponPackOrder,method:"POST",mask:"下单中",data:{storeId:e.storeInfo&&e.storeInfo.id,couponPackId:e.id}});case 8:n=t.sent,n?(e.$refs["Pay"].open(JSON.stringify({orderSn:n.data,orderType:6,go:{t:3,url:"/pages/order/detail?id=".concat(n.data)}})),e.loading=!1):e.loading=!1;case 10:case"end":return t.stop()}}),t)})))()},fzID:function(e){var t=e.sn.toString();this.util.fz(t)}})};t.default=l}).call(this,n("df3c")["default"])},"12ac":function(e,t,n){"use strict";n.r(t);var r=n("0a9f"),a=n.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=a.a},3072:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r}));var r={pay:function(){return Promise.all([n.e("common/vendor"),n.e("components/pay/pay")]).then(n.bind(null,"1e12"))}},a=function(){var e=this.$createElement;this._self._c},o=[]},"4a02":function(e,t,n){"use strict";var r=n("6fce"),a=n.n(r);a.a},"6fce":function(e,t,n){},"7db2":function(e,t,n){"use strict";n.r(t);var r=n("3072"),a=n("12ac");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("4a02");var c=n("828b"),u=Object(c["a"])(a["default"],r["b"],r["c"],!1,null,"c036e6ee",null,!1,r["a"],void 0);t["default"]=u.exports}},[["02a9","common/runtime","common/vendor"]]]);