(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/other/reserve/ljyy"],{"11d6":function(e,t,r){"use strict";(function(e,t){var n=r("47a9");r("b483");n(r("3240"));var a=n(r("64b1"));e.__webpack_require_UNI_MP_PLUGIN__=r,t(a.default)}).call(this,r("3223")["default"],r("df3c")["createPage"])},3111:function(e,t,r){"use strict";(function(e){var n=r("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("7eb4")),o=n(r("7ca3")),s=n(r("ee10")),c=r("8f59"),u=n(r("77a5")),i=r("d468");function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={name:"reserve-ljyy",components:{mgInput:function(){r.e("components/form/my-input").then(function(){return resolve(r("4624"))}.bind(null,r)).catch(r.oe)},mgRadio:function(){r.e("components/form/my-radio").then(function(){return resolve(r("2c44"))}.bind(null,r)).catch(r.oe)},MgCell:function(){r.e("components/common/my-cell").then(function(){return resolve(r("193e"))}.bind(null,r)).catch(r.oe)},bkB:function(){r.e("components/common/block-b").then(function(){return resolve(r("6f07"))}.bind(null,r)).catch(r.oe)},sqBtn:function(){Promise.all([r.e("common/vendor"),r.e("components/common/sq-btn")]).then(function(){return resolve(r("c52b"))}.bind(null,r)).catch(r.oe)},mgRtext:function(){Promise.all([r.e("common/vendor"),r.e("components/common/functionCmp/rich-text")]).then(function(){return resolve(r("248b"))}.bind(null,r)).catch(r.oe)},Pay:function(){Promise.all([r.e("common/vendor"),r.e("components/pay/pay")]).then(function(){return resolve(r("1e12"))}.bind(null,r)).catch(r.oe)}},data:function(){return{yyxx:{},params:{storeId:"",people:"",userName:"",userTel:"",telcode:"+66",num:1,sex:this.$t("other-reserve.male"),note:"",ydxx:""},sexArr:[{value:this.$t("other-reserve.female"),name:this.$t("other-reserve.lady")},{value:this.$t("other-reserve.male"),name:this.$t("other-reserve.mr"),checked:"true"}],loading:!1,isbj:!1,checkInfo:{}}},onLoad:function(e){var t=this;return(0,s.default)(a.default.mark((function r(){return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.util.setNT(t.$t("other-reserve.reserve")),t.params.storeId=e.storeId,t.getLoginInfo(),t.getData();case 4:case"end":return r.stop()}}),r)})))()},onShow:function(){this.params.ydxx=e.getStorageSync("bdhc").map((function(e){return e.name})).join("，").replace("，"," ").replace("，"," "),this.params.xzyy=e.getStorageSync("bdhc"),this.checkOut()},mixins:[i.utilMixins],computed:{},methods:l(l({},(0,c.mapActions)(["getConfig"])),{},{checkOut:function(){var e=this;return(0,s.default)(a.default.mark((function t(){var r,n;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.util.request({url:e.api.yycheck,method:"get",data:{appointmentTime:e.params.xzyy[2].value,person:e.params.xzyy[3].value,typeId:e.params.xzyy[4].value.id,areaId:e.params.xzyy[5].value,num:e.params.num,contact:e.params.userName,sex:e.params.sex,notes:e.params.note,mobile:e.params.telcode+e.params.userTel,storeId:e.params.storeId}});case 2:r=t.sent,n=r.data,e.checkInfo=n;case 5:case"end":return t.stop()}}),t)})))()},getData:function(){var t=this;return(0,s.default)(a.default.mark((function r(){var n;return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=e.getStorageSync("fwb"),t.yyxx=n;case 2:case"end":return r.stop()}}),r)})))()},setTel:function(e){this.params.userTel=e},save:function(){var t=this;return(0,s.default)(a.default.mark((function r(){var n,o,s;return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.params.xzyy){r.next=2;break}return r.abrupt("return",t.util.message(t.$t("other-reserve.please_complete_reservation_info"),3));case 2:if(!(t.params.num<=0)){r.next=4;break}return r.abrupt("return",t.util.message(t.$t("other-reserve.minimum_reservation_number")+"1",3));case 4:if(t.params.typeId=t.params.xzyy[4].value.id,console.log(t.params),t.checkOut(),n=["people","note"],o=u.default.isFailParams({field:t.params,filter:n,tips:{typeId:t.$t("other-reserve.missing_type"),storeId:t.$t("other-reserve.missing_merchant"),userName:t.$t("other-reserve.please_enter_contact_name_again"),userTel:t.$t("other-reserve.please_enter_phone_number_again")}}),o){r.next=13;break}return r.abrupt("return");case 13:return t.loading=!0,r.next=16,t.util.request({url:t.api.yycj,method:"POST",mask:1,data:{appointmentTime:t.params.xzyy[2].value,person:t.params.xzyy[3].value,typeId:t.params.xzyy[4].value.id,areaId:t.params.xzyy[5].value,num:t.params.num,contact:t.params.userName,sex:t.params.sex,notes:t.params.note,mobile:t.params.telcode+t.params.userTel,storeId:t.params.storeId}});case 16:s=r.sent,s?(e.removeStorageSync("bdhc"),t.checkInfo.money>0?t.$refs["Pay"].open(JSON.stringify({orderSn:s.data,orderType:7,go:{t:2,url:"/pages/other/reserve/yyxq?id=".concat(s.data)}})):(t.util.message(s.msg,1,1e3),t.loading=!1,setTimeout((function(){t.go({t:2,url:"/pages/other/reserve/yyxq?id="+s.data})}),1e3))):t.loading=!1;case 18:case"end":return r.stop()}}),r)})))()}})};t.default=p}).call(this,r("df3c")["default"])},"64b1":function(e,t,r){"use strict";r.r(t);var n=r("90f2"),a=r("c4ca");for(var o in a)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(o);r("d4a8");var s=r("828b"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"7b62313e",null,!1,n["a"],void 0);t["default"]=c.exports},"90f2":function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return n}));var n={pay:function(){return Promise.all([r.e("common/vendor"),r.e("components/pay/pay")]).then(r.bind(null,"1e12"))}},a=function(){var e=this,t=e.$createElement,r=(e._self._c,e.user.nickname||e.$t("other-reserve.wechat_user")),n=e.$t("other-reserve.welcome"),a=e.$t("other-reserve.please_enter_contact_name"),o=e.$t("other-reserve.please_enter_phone_number"),s=e.$t("other-reserve.contact_information"),c=e.$t("other-reserve.please_enter_reservation_number"),u=e.$t("other-reserve.reservation_number"),i=e.$t("other-reserve.please_note"),m=e.params.note.length,l=e.params.xzyy?e.$t("other-reserve.dining_time"):null,p=e.params.xzyy?e.$t("other-reserve.number_of_people"):null,f=e.params.xzyy?e.$t("other-reserve.dining_area"):null,d=e.params.xzyy?e.$t("other-reserve.dining_position"):null,h=e.params.xzyy&&e.checkInfo.money>0?e.$t("other-reserve.reservation_amount"):null,v=e.checkInfo.money>0?e.$t("other-reserve.pay_now"):null,y=e.checkInfo.money>0?null:e.$t("other-reserve.book_now");e.$mp.data=Object.assign({},{$root:{m0:r,m1:n,m2:a,m3:o,m4:s,m5:c,m6:u,m7:i,g0:m,m8:l,m9:p,m10:f,m11:d,m12:h,m13:v,m14:y}})},o=[]},a347:function(e,t,r){},c4ca:function(e,t,r){"use strict";r.r(t);var n=r("3111"),a=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},d4a8:function(e,t,r){"use strict";var n=r("a347"),a=r.n(n);a.a}},[["11d6","common/runtime","common/vendor"]]]);