(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/other/coupon/couponList"],{"20e9":function(e,n,t){"use strict";(function(e){var o=t("47a9");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=o(t("7eb4")),r=o(t("ee10")),u=(t("8f59"),t("d468")),a={name:"coupon-list",components:{jzz:function(){t.e("components/common/jzz").then(function(){return resolve(t("4f31"))}.bind(null,t)).catch(t.oe)},iDefault:function(){t.e("components/common/default").then(function(){return resolve(t("1c4b"))}.bind(null,t)).catch(t.oe)},myCoupon:function(){Promise.all([t.e("common/vendor"),t.e("components/common/my-coupon")]).then(function(){return resolve(t("0c65"))}.bind(null,t)).catch(t.oe)},sqBtn:function(){Promise.all([t.e("common/vendor"),t.e("components/common/sq-btn")]).then(function(){return resolve(t("c52b"))}.bind(null,t)).catch(t.oe)},userPrivacy:function(){t.e("components/user/userPrivacy").then(function(){return resolve(t("50b8"))}.bind(null,t)).catch(t.oe)}},data:function(){return{isload:"",params:{page:1,size:10,state:"normal"},fx:{},cInfo:{}}},onReady:function(){var n=this;e.getPrivacySetting({success:function(e){e.needAuthorization&&n.$refs.privacy.open(e.privacyContractName)},fail:function(){},complete:function(e){console.log(e)}})},onLoad:function(e){var n=this;return(0,r.default)(c.default.mark((function t(){return c.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.getLoginInfo();case 2:return t.next=4,n.checkLogin();case 4:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:console.log("options",e),e&&e.couponId?(n.isload=!1,n.util.setNT(n.$t("other-coupon.coupon_collection")),n.query=e,n.getCoupon(e.couponId)):(n.isload=!0,n.refresh(),n.util.setNT(n.$t("other-coupon.my_coupons")));case 8:case"end":return t.stop()}}),t)})))()},mixins:[u.sljz],computed:{},onShow:function(){this.isload&&this.refresh()},methods:{refresh:function(){this.changeTab(this.aIdx)},changeTab:function(e){this.isget=this.mygd=!1,this.params.page=1,this.dataList=[],this.getList()},getList:function(){var e=this;return(0,r.default)(c.default.mark((function n(){var t,o;return c.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.util.request({url:e.api.mycp,data:e.params});case 2:t=n.sent,o=t.data,e.dataList=e.dataList.concat(o.list),e.isget=!0,e.mygd=e.params.size>o.list.length,e.params.page++;case 8:case"end":return n.stop()}}),n)})))()},getCoupon:function(e){var n=this;return(0,r.default)(c.default.mark((function t(){var o,r;return c.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.util.request({url:"".concat(n.api.yhqzz,"/").concat(e)});case 2:o=t.sent,r=o.data,n.cInfo=r;case 5:case"end":return t.stop()}}),t)})))()},ljlq:function(e,n){var t=this;return(0,r.default)(c.default.mark((function o(){var r,u;return c.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(t.isLogin){o.next=3;break}return t.$refs["sqBtn"].open(),o.abrupt("return");case 3:return o.next=5,t.util.request({url:"".concat(t.api.jszz,"/").concat(e),method:"POST"});case 5:r=o.sent,u=r.msg,t.util.message(u,1,1e3),t.getCoupon(n);case 9:case"end":return o.stop()}}),o)})))()},qxzs:function(e,n){var t=this;return(0,r.default)(c.default.mark((function o(){var r,u;return c.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.util.modal(t.$t("other-coupon.confirm_cancel_gift"));case 2:return o.next=4,t.util.request({url:"".concat(t.api.yhqzz,"/").concat(e),method:"DELETE"});case 4:r=o.sent,u=r.msg,t.util.message(u,1,1e3),t.getCoupon(n);case 8:case"end":return o.stop()}}),o)})))()},fxd:function(e){console.log(e),this.fx=e},goDhm:function(){this.go({url:"/pages/other/coupon/dhm?type=1",t:1})},ljdy:function(){var e=this;return(0,r.default)(c.default.mark((function n(){return c.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.jjmbxx){n.next=10;break}return n.prev=1,n.next=4,e.requestSM(["coupon","couponOverdue","activity"]);case 4:n.next=10;break;case 6:return n.prev=6,n.t0=n["catch"](1),e.jjmbxx=!0,n.abrupt("return");case 10:case"end":return n.stop()}}),n,null,[[1,6]])})))()}},onShareAppMessage:function(){var e="pages/other/coupon/couponList?couponId=".concat(this.fx.id,"&userId=").concat(this.uId);return this.util.mpShare({t:this.fx.coupon.regiftTitle,i:this.getImgS(this.fx.coupon.regiftImage),p:e})}};n.default=a}).call(this,t("3223")["default"])},"42b5":function(e,n,t){"use strict";var o=t("9dcf"),c=t.n(o);c.a},"9dcf":function(e,n,t){},b886:function(e,n,t){"use strict";t.r(n);var o=t("20e9"),c=t.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=c.a},cc23:function(e,n,t){"use strict";(function(e,n){var o=t("47a9");t("b483");o(t("3240"));var c=o(t("f0e7"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(c.default)}).call(this,t("3223")["default"],t("df3c")["createPage"])},ef81:function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return c})),t.d(n,"a",(function(){}));var o=function(){var e=this,n=e.$createElement,t=(e._self._c,!e.isload&&e.cInfo&&e.cInfo.coupon&&e.user.id&&e.cInfo.member&&e.user.id!=e.cInfo.member.id?e.$t("other-coupon.your_friend"):null),o=!e.isload&&e.cInfo&&e.cInfo.coupon&&e.user.id&&e.cInfo.member&&e.user.id!=e.cInfo.member.id?e.$t("other-coupon.send_you_coupon"):null,c=!e.isload&&e.cInfo&&e.cInfo.coupon&&0==e.cInfo.coupon.startSwitch?e.$t("other-coupon.no_limit"):null,r=!e.isload&&e.cInfo&&e.cInfo.coupon&&0!=e.cInfo.coupon.startSwitch&&1==e.cInfo.coupon.startSwitch?e.$t("other-coupon.full"):null,u=!e.isload&&e.cInfo&&e.cInfo.coupon&&0!=e.cInfo.coupon.startSwitch&&1==e.cInfo.coupon.startSwitch?e.cInfo.coupon.startMoney&&parseFloat(e.cInfo.coupon.startMoney):null,a=!e.isload&&e.cInfo&&e.cInfo.coupon&&0!=e.cInfo.coupon.startSwitch&&1==e.cInfo.coupon.startSwitch?e.$t("other-coupon.available"):null,i=!e.isload&&e.cInfo&&e.cInfo.coupon&&e.user.id&&e.cInfo.member&&e.user.id==e.cInfo.member.id&&0==e.cInfo.state?e.$t("other-coupon.friend_not_received"):null,s=!e.isload&&e.cInfo&&e.cInfo.coupon&&e.user.id&&e.cInfo.member&&e.user.id==e.cInfo.member.id&&0==e.cInfo.state?e.$t("other-coupon.auto_return_hours"):null,f=!e.isload&&e.cInfo&&e.cInfo.coupon&&e.user.id&&e.cInfo.member&&e.user.id==e.cInfo.member.id&&0==e.cInfo.state?e.$t("other-coupon.cancel_gift"):null,l=!e.isload&&e.cInfo&&e.cInfo.coupon&&e.user.id&&e.cInfo.member&&e.user.id==e.cInfo.member.id&&0!=e.cInfo.state&&1==e.cInfo.state&&e.cInfo.receiveMember?e.$t("other-coupon.receive"):null,d=!e.isload&&e.cInfo&&e.cInfo.coupon&&e.user.id&&e.cInfo.member&&e.user.id==e.cInfo.member.id&&0!=e.cInfo.state&&(1!=e.cInfo.state||!e.cInfo.receiveMember)&&2==e.cInfo.state?e.$t("other-coupon.coupon_canceled"):null,p=e.isload||!e.cInfo||!e.cInfo.coupon||e.user.id&&e.cInfo.member&&e.user.id==e.cInfo.member.id||0!=e.cInfo.state?null:e.$t("other-coupon.immediate_receive"),m=e.isload||!e.cInfo||!e.cInfo.coupon||e.user.id&&e.cInfo.member&&e.user.id==e.cInfo.member.id||0==e.cInfo.state||1!=e.cInfo.state?null:e.$t("other-coupon.coupon_received"),h=e.isload?e.$t("other-coupon.exchange_coupon"):null,I=e.isload?0==e.dataList.length&&e.isget:null,b=e.isload?!e.dataList||e.dataList.length<=0:null,v=e.isload?e.$t("other-coupon.coupon_history"):null,g=e.isload?e.$t("other-coupon.gift_record"):null;e.$mp.data=Object.assign({},{$root:{m0:t,m1:o,m2:c,m3:r,m4:u,m5:a,m6:i,m7:s,m8:f,m9:l,m10:d,m11:p,m12:m,m13:h,g0:I,g1:b,m14:v,m15:g}})},c=[]},f0e7:function(e,n,t){"use strict";t.r(n);var o=t("ef81"),c=t("b886");for(var r in c)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return c[e]}))}(r);t("42b5");var u=t("828b"),a=Object(u["a"])(c["default"],o["b"],o["c"],!1,null,"ad4c63d4",null,!1,o["a"],void 0);n["default"]=a.exports}},[["cc23","common/runtime","common/vendor"]]]);