(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-integral-save-order"],{"0966":function(t,e,a){"use strict";a.r(e);var i=a("ae73"),n=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);e["default"]=n.a},"0c87":function(t,e,a){var i=a("99ef");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("6a81b67c",i,!0,{sourceMap:!1,shadowMode:!1})},"0e28":function(t,e,a){var i=a("bb5f");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("4c77b68b",i,!0,{sourceMap:!1,shadowMode:!1})},1332:function(t,e,a){"use strict";a.r(e);var i=a("9ddf"),n=a("b343");for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);a("deef");var s=a("828b"),o=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"5a147d10",null,!1,i["a"],void 0);e["default"]=o.exports},"16b9":function(t,e,a){"use strict";(function(t){a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("9b1b")),r=a("8f59"),s={name:"SelfFetchAddres",components:{},props:{dl:{type:Object,default:{}},mobile:{type:String,default:""},yjrV:{type:Object,default:{}},storeInfo:{type:Object,default:{}},cd:{type:Object,default:{}}},computed:(0,n.default)((0,n.default)((0,n.default)({},(0,r.mapState)(["sjxx"])),(0,r.mapState)({copywriting:function(t){return t.layout.copywriting}})),{},{mrtxImg:function(){return"".concat(this.onImgurl,"out/adbg.jpg")}}),watch:{mobile:{handler:function(t){this.phone=t},immediate:!0}},data:function(){return{phone:"",current:0}},methods:{radioChange:function(t){this.current=2==+t.detail.value?1:0,this.$emit("radioChange",+t.detail.value)},iMobile:function(){this.$emit("auZdtx",this.phone)},auZdtx:function(){t.log("mobile",this.user.mobile),this.$emit("auZdtx",this.user.mobile)},goSelect:function(){uni.navigateTo({url:"/pages/shop/select/index?page=recharge&searchIds=".concat(2==this.dl.storeType?this.dl.storeIds:"")})}}};e.default=s}).call(this,a("ba7c")["default"])},"1aa1":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"footer f-bt f-y-c p2",style:{marginBottom:t.isIpx?"40rpx":""}},[a("v-uni-view",[a("v-uni-view",{staticClass:"neutra-font"},[t._v(t._s(t.$t("integral.total"))+"："),a("v-uni-text",{staticClass:"f32 wei",style:{color:t.tColor}},[t._v(t._s(t.dl.points)+t._s(t.$t("integral.points")))]),t.dl.money>0?a("v-uni-text",{staticClass:"f32 wei",style:{color:t.tColor}},[t._v("+฿"+t._s(t.dl.money))]):t._e()],1)],1),a("v-uni-view",{staticClass:"flex f-g-0"},[a("v-uni-button",{style:{background:t.tColor,color:t.fontColor},attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.savePay.apply(void 0,arguments)}}},[t._v(t._s(t.$t("integral.confirm_redemption")))])],1),t.isIpx?a("v-uni-view",{staticClass:"bgf"}):t._e()],1)},n=[]},"1e12":function(t,e,a){"use strict";a.r(e);var i=a("6c03"),n=a("50d9");for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);a("36dc");var s=a("828b"),o=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"f383cf38",null,!1,i["a"],void 0);e["default"]=o.exports},"366e":function(t,e,a){"use strict";a.r(e);var i=a("c45d"),n=a("d435");for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);a("4a28");var s=a("828b"),o=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"fb2ddbe8",null,!1,i["a"],void 0);e["default"]=o.exports},3688:function(t,e,a){"use strict";a.r(e);var i=a("dcb8"),n=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);e["default"]=n.a},"36dc":function(t,e,a){"use strict";var i=a("6e8cd"),n=a.n(i);n.a},"371d":function(t,e,a){"use strict";a.r(e);var i=a("9aeb"),n=a("0966");for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);a("a10f");var s=a("828b"),o=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"1cf151e7",null,!1,i["a"],void 0);e["default"]=o.exports},"40b2":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.bdr[data-v-1cf151e7]{border-bottom-right-radius:%?20?%;border-bottom-left-radius:%?20?%}',""]),t.exports=e},"4a28":function(t,e,a){"use strict";var i=a("0c87"),n=a.n(i);n.a},"4bad":function(t,e,a){"use strict";a.r(e);var i=a("9cfb"),n=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);e["default"]=n.a},"50d9":function(t,e,a){"use strict";a.r(e);var i=a("bb62"),n=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);e["default"]=n.a},5663:function(t,e,a){"use strict";var i=a("0e28"),n=a.n(i);n.a},"6c03":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return i}));var i={uniPopup:a("8669").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("uni-popup",{ref:"popup",attrs:{type:"bottom"}},[a("v-uni-view",{staticClass:"bs30 bf"},[a("v-uni-view",{staticClass:"tit p-r f-c"},[a("v-uni-view",{staticClass:"f32 wei"},[t._v(t._s(t.$t("pay.confirm_payment")))]),a("v-uni-text",{staticClass:"p-a cIcon iconfont icon-guanbi c6 f36",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"p3"},[a("v-uni-form",{on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.formSubmit.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"payOptions"},[a("v-uni-radio-group",{attrs:{name:"radiogroup"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.radioChange.apply(void 0,arguments)}}},t._l(t.payArr,(function(e,i){return a("v-uni-label",{key:i,staticClass:"weui-cell right30 f-s mb30 bf"},[a("v-uni-view",{staticClass:"f-y-c"},[a("v-uni-image",{staticClass:"hdimg",attrs:{mode:"aspectFit",src:e.img}})],1),a("v-uni-view",{staticClass:"weui-cell__bd"},[a("v-uni-view",{staticClass:"f-row"},[a("v-uni-view",{staticClass:"f34 f-1 l-n"},[t._v(t._s(e.name)),"ye"==e.value?a("v-uni-text",{staticClass:"c9 f24 ml10 neutra-font"},[t._v("("+t._s(t.$t("pay.available"))+":฿"+t._s(parseFloat(e.balance))+")")]):t._e()],1),a("v-uni-view",{staticClass:"weui-cell__ft_in-radio"},[a("v-uni-view",{staticClass:"yuan f-c",style:{backgroundColor:e.value==t.radioVal?e.color||t.tColor:"",borderColor:e.value==t.radioVal?e.color||t.tColor:""}},[e.value==t.radioVal?a("v-uni-text",{staticClass:"iconfont f20 icon-gou wei",style:{color:e.value==t.radioVal?t.fontColor:""}}):t._e()],1),a("v-uni-radio",{staticClass:"weui-check",attrs:{value:e.value,color:"#F98811",checked:e.value==t.radioVal}})],1)],1)],1)],1)})),1)],1),t.payArr.length?a("v-uni-view",{},[a("v-uni-button",{staticClass:"foot-btn bs60 f30 wei cf",style:{backgroundColor:t.tColor,color:t.fontColor},attrs:{disabled:t.loading,loading:t.loading,"form-type":"submit"}},[t._v(t._s(t.$t("pay.pay"))),a("v-uni-text",{staticClass:"neutra-font ml10"},[t._v(t._s(t.pmoney))]),t._v("THB")],1)],1):t._e()],1)],1)],1)],1)},r=[]},"6e8cd":function(t,e,a){var i=a("ce22");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("182cbcca",i,!0,{sourceMap:!1,shadowMode:!1})},9611:function(t,e,a){var i=a("40b2");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("1155f9b0",i,!0,{sourceMap:!1,shadowMode:!1})},"99ef":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.bgimg[data-v-fb2ddbe8]{z-index:-1;top:0;left:0;width:100%;height:%?150?%}.distance-text[data-v-fb2ddbe8]{padding:%?8?% %?16?%;border-radius:%?30?%;box-shadow:0 2px 8px 0 rgba(0,0,0,.3)}.bdr[data-v-fb2ddbe8]{border-bottom-right-radius:%?20?%;border-bottom-left-radius:%?20?%}.yuan[data-v-fb2ddbe8]{width:%?42?%;height:%?42?%;border-radius:50%;border:%?2?% solid #ccc;z-index:10}.rd[data-v-fb2ddbe8]{display:none}',""]),t.exports=e},"9aeb":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"bf bdr"},[t.dl.address?a("v-uni-view",{staticClass:"b-b-e p32"},[a("v-uni-view",{staticClass:"wei f38 f-y-c flex",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.switchOrderType.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"f-g-1 t-o-e2"},[t._v(t._s(t.dl.address.address)+t._s(t.dl.address.description))]),a("v-uni-view",{staticClass:"iconfont icon-gengduo f28 ml5 c0"})],1),a("v-uni-view",{staticClass:"flex f-y-c c0 mt10"},[a("v-uni-view",[t._v(t._s(t.dl.address.contact)+"("+t._s(t.dl.address.call)+")"),a("v-uni-text",{staticClass:"ml10"},[t._v(t._s(t.dl.address.mobile))])],1)],1)],1):a("v-uni-view",{staticClass:"b-b-e p32 mt20"},[a("v-uni-view",{staticClass:"wei f38 f-y-c t-o-e",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.switchOrderType.apply(void 0,arguments)}}},[t._v(t._s(t.$t("integral.please_select_delivery_address"))),a("v-uni-text",{staticClass:"iconfont icon-gengduo f28 ml5 c0"})],1)],1)],1)},n=[]},"9cfb":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("5ef2"),a("aa9c"),a("d4b5");var n=i(a("2634")),r=i(a("2fdc")),s=(a("8f59"),i(a("77a5")),i(a("baa5"))),o=i(a("366e")),c=i(a("371d")),u=i(a("1332")),d=i(a("1e12")),l=a("d468"),f=getApp().globalData,p={name:"js-details",components:{CheckSave:s.default,SelfFetchAddres:o.default,TakeOutAddres:c.default,load:u.default,Pay:d.default},data:function(){return{deliveryMode:"1",showLoading:!0,loading:!1,payObj:{},params:{storeId:0,addressId:0,goodsId:"",diningType:1},storeInfo:{},checkData:{},showGg:!1}},onLoad:function(t){var e=this;return(0,r.default)((0,n.default)().mark((function a(){var i,r;return(0,n.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.id&&t.diningType&&(i=t.id,r=t.diningType),e.id=i,e.params.goodsId=i,e.params.diningType=r,e.deliveryMode=r,e.util.setNT(e.$t("integral.confirm_redemption")),e.getCheckOut();case 7:case"end":return a.stop()}}),a)})))()},onShow:function(){f.xzdzInfo&&(this.params.addressId=f.xzdzInfo.id,this.params.diningType=this.deliveryMode,this.getCheckOut()),uni.getStorageSync("rStoreInfo")&&(this.storeInfo=uni.getStorageSync("rStoreInfo"),this.handstore(this.storeInfo),this.load(this.storeInfo.id))},mixins:[l.utilMixins],computed:{ModeArr:function(){var t=[];return this.checkData&&this.checkData.goods&&this.checkData.goods.deliveryChannel.indexOf(1)>-1&&t.push({name:this.$t("integral.courier_delivery"),value:"1",cname:"leftInactive",acname:"leftActive",icon:"icon-waimaifuwu"}),this.checkData&&this.checkData.goods&&this.checkData.goods.deliveryChannel.indexOf(2)>-1&&t.push({name:this.$t("integral.store_pickup"),value:"2",cname:"rightInactive",acname:"rightActive",icon:"icon-zhongbao-mendian"}),t}},methods:{getCheckOut:function(){var t=this;return(0,r.default)((0,n.default)().mark((function e(){var a,i;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.util.request({url:t.api.pMallOut,data:t.params});case 2:a=e.sent,i=a.data,i&&(t.check=!1),t.checkData=i;case 6:case"end":return e.stop()}}),e)})))()},savePay:function(){var t=this;return(0,r.default)((0,n.default)().mark((function e(){return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!=t.params.diningType||t.checkData.order.address){e.next=2;break}return e.abrupt("return",t.util.message(t.$t("integral.please_select_address"),3));case 2:if(2!=t.params.diningType||t.params.storeId){e.next=4;break}return e.abrupt("return",t.util.message(t.$t("integral.please_select_store"),3));case 4:return e.next=6,t.util.modal(t.$t("integral.are_you_sure_to_redeem_product"));case 6:t.loading=!0,t.checkData.pay&&t.checkData.pay.money>0?(t.zfForm=t.checkData.pay,t.$refs["Pay"].jfOpen(JSON.stringify({orderSn:t.checkData.pay.orderSn,orderType:"jfsc",go:{t:2,url:"/pages/my/integral/integral-record?orderSn=".concat(t.checkData.pay.orderSn)}}),JSON.stringify(t.checkData.pay))):t.zfPay();case 8:case"end":return e.stop()}}),e)})))()},zfPay:function(){var t=this;return(0,r.default)((0,n.default)().mark((function e(){var a,i,r;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.loading=!1,!(t.checkData.pay&&t.checkData.pay.money<=0)){e.next=9;break}return e.next=4,t.util.request({url:t.api.jfsplb,method:"POST",ct:1});case 4:a=e.sent,i=a.data,r=a.msg,t.util.message(r,3),setTimeout((function(){t.go({t:2,url:"/pages/my/integral/integral-record?orderSn=".concat(i.orderSn)})}),300);case 9:case"end":return e.stop()}}),e)})))()},cPay:function(){this.getCheckOut()},changeDeliveryMode:function(t){t.value!=this.deliveryMode&&(this.deliveryMode=t.value,this.params.diningType=t.value,this.getCheckOut())},selectTime:function(){this.$refs["CheckTime"].open(this.deliveryMode)},setMobile:function(t){this.params.mobile=t,this.params.diningType=this.deliveryMode,this.getCheckOut()},handstore:function(t){this.params.storeId=t.id,this.params.diningType=this.deliveryMode,this.getCheckOut()},load:function(t){return(0,r.default)((0,n.default)().mark((function e(){return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t&&uni.removeStorageSync("rStoreInfo");case 1:case"end":return e.stop()}}),e)})))()}}};e.default=p},"9ddf":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return 1==t.type?a("v-uni-view",{staticClass:"posi-f wh bf t0 z9999",style:{zIndex:t.zix}},[a("v-uni-view",{staticClass:"animation_opactiy posi-f wh bf t0 l0"}),a("v-uni-view",{staticClass:"jzzc",class:t.loadingImg&&t.loadingImg.imgUrl?"":"f-c"},[t.loadingImg.imgUrl?a("mg-img",{attrs:{m:"widthFix",src:t.loadingImg.imgUrl}}):a("v-uni-view",{staticClass:"weui-loading"})],1)],1):a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],staticClass:"posi-f wh t0 z9999 skeletonbg",on:{touchmove:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}})},n=[]},a10f:function(t,e,a){"use strict";var i=a("9611"),n=a.n(i);n.a},ae73:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("9b1b")),r=a("8f59"),s={name:"SelfFetchAddres",components:{},props:{dl:{type:Object,default:{}},yjrV:{type:Object,default:{}},cd:{type:Object,default:{}}},data:function(){return{current:0}},computed:(0,n.default)({},(0,r.mapState)(["sjxx"])),methods:{switchOrderType:function(){uni.navigateTo({url:"/pages/my/addres/addresses"})},radioChange:function(){this.$emit("radioChange")},selectTime:function(){this.$emit("selectTime")}}};e.default=s},b343:function(t,e,a){"use strict";a.r(e);var i=a("bb5e"),n=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);e["default"]=n.a},baa5:function(t,e,a){"use strict";a.r(e);var i=a("1aa1"),n=a("3688");for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);a("5663");var s=a("828b"),o=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"6e514bf5",null,!1,i["a"],void 0);e["default"]=o.exports},bb5e:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("9b1b")),r=a("8f59"),s={props:{zix:{type:String,default:""},type:{type:String,default:"1"},value:{type:Boolean,default:!1}},computed:(0,n.default)({},(0,r.mapState)({loadingImg:function(t){return t.layout&&t.layout.loadingImg}})),data:function(){return{}}};e.default=s},bb5f:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.pro-img[data-v-6e514bf5]{width:%?120?%;height:%?90?%;flex-shrink:0}.footer[data-v-6e514bf5]{box-shadow:%?0?% %?4?% %?20?% %?0?% hsla(0,0%,86.7%,.8);background-color:#fff;z-index:10;position:fixed;bottom:0;left:0;width:100%;height:%?125?%}.footer uni-button[data-v-6e514bf5]{width:%?170?%;text-align:center;padding:0;height:100%;line-height:%?70?%;border-radius:%?60?%!important;font-size:%?30?%}',""]),t.exports=e},bb62:function(t,e,a){"use strict";(function(t){a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("2634")),r=i(a("2fdc"));a("64aa"),a("5ef2"),a("c223"),a("aa9c"),a("aa77"),a("bf0f");var s=i(a("77a5")),o=(i(a("5137")),a("cc12"),{name:"payMoney",components:{},props:{visible:{type:Boolean,default:!1}},data:function(){return{loading:!1,radioVal:"ye",payArr:[],payObj:{},payDataObj:{},yeczrule:[]}},computed:{pmoney:function(){return Number(this.payDataObj&&this.payDataObj.money||0).toFixed(2)}},methods:{open:function(t){var e=this;return(0,r.default)((0,n.default)().mark((function a(){return(0,n.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.gUser(),e.payObj=JSON.parse(t),a.next=4,e.getPayArr();case 4:if(!(e.payDataObj&&e.payDataObj.money<=0)){a.next=7;break}return e.formSubmit("zero"),a.abrupt("return");case 7:uni.getProvider({service:"payment",success:function(t){t.provider.indexOf("wxpay")?e.provider="wxpay":t.provider.indexOf("alipay")?e.provider="alipay":t.provider.indexOf("baidu")?e.provider="baidu":t.provider.indexOf("toutiao")&&(e.provider="toutiao")}}),e.$refs["popup"].open();case 9:case"end":return a.stop()}}),a)})))()},czOpen:function(t){var e=this;return(0,r.default)((0,n.default)().mark((function a(){var i,r;return(0,n.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.gUser(),e.payObj=JSON.parse(t),a.next=4,e.util.request({url:"".concat(e.api.pay,"/").concat(e.payObj.orderSn),method:"get",mask:1});case 4:i=a.sent,r=i.data,e.payDataObj=r,e.payObj.payId=r.payList&&r.payList[0].id,e.formSubmit("cz");case 9:case"end":return a.stop()}}),a)})))()},jfOpen:function(e,a){var i=this;return(0,r.default)((0,n.default)().mark((function r(){var s,o,c;return(0,n.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(i.gUser(),i.payObj=JSON.parse(e),i.payDataObj=JSON.parse(a),s=[],o=JSON.parse(a),c=0;c<o.payList.length;c++)"balance"==o.payList[c].payType&&(i.payObj.payId=o.payList[c].id,s.push({name:i.$t("pay.balance_payment"),value:"ye",img:"".concat(i.onImgurl,"pay/yezf.png"),isDefault:o.payList[c].isDefault,id:o.payList[c].id,balance:o.payList[c].balance})),"weixin"==o.payList[c].payType&&(i.payObj.payId=o.payList[c].id,s.push({name:i.$t("pay.wechat_payment"),value:"wx",img:"".concat(i.onImgurl,"pay/wxzf.png"),isDefault:o.payList[c].isDefault,id:o.payList[c].id})),"alipay"==o.payList[c].payType&&(i.payObj.payId=o.payList[c].id,s.push({name:i.$t("pay.alipay_payment"),value:"zfb",img:"".concat(i.onImgurl,"pay/zfbzf.png"),isDefault:o.payList[c].isDefault,id:o.payList[c].id})),"ksher"==o.payList[c].payType&&(i.payObj.payId=o.payList[c].id,s.push({name:"ksher",value:"ksher",img:"".concat(i.onImgurl,"pay/wxzf.png"),isDefault:o.payList[c].isDefault,id:o.payList[c].id}));return i.payArr=s,t.log(s),n.abrupt("return");case 11:case"end":return n.stop()}}),r)})))()},close:function(){this.$emit("pay"),this.loading=!1,this.$refs["popup"].close()},radioChange:function(t){this.radioVal=t.detail.value;var e=this.payArr.find((function(e){return e.value==t.detail.value}));this.payObj.payId=e.id},getPayArr:function(){var t=this;return(0,r.default)((0,n.default)().mark((function e(){var a,i,r,s;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.util.request({url:"".concat(t.api.pay,"/").concat(t.payObj.orderSn),method:"get",mask:1});case 2:if(a=e.sent,i=a.data,t.payDataObj=i,!(t.payDataObj&&t.payDataObj.money<=0)){e.next=7;break}return e.abrupt("return");case 7:for(r=[],s=0;s<i.payList.length;s++)"balance"==i.payList[s].payType&&(t.payObj.payId=i.payList[s].id,r.push({name:t.$t("pay.balance_payment"),value:"ye",img:"".concat(t.onImgurl,"pay/yezf.png"),isDefault:i.payList[s].isDefault,id:i.payList[s].id,balance:i.payList[s].balance})),"weixin"==i.payList[s].payType&&(t.payObj.payId=i.payList[s].id,r.push({name:t.$t("pay.wechat_payment"),value:"wx",img:"".concat(t.onImgurl,"pay/wxzf.png"),isDefault:i.payList[s].isDefault,id:i.payList[s].id})),"alipay"==i.payList[s].payType&&(t.payObj.payId=i.payList[s].id,r.push({name:t.$t("pay.alipay_payment"),value:"zfb",img:"".concat(t.onImgurl,"pay/zfbzf.png"),isDefault:i.payList[s].isDefault,id:i.payList[s].id})),"ksher"==i.payList[s].payType&&(t.payObj.payId=i.payList[s].id,r.push({name:"ksher",value:"ksher",img:"".concat(t.onImgurl,"pay/ksher.png"),isDefault:i.payList[s].isDefault,id:i.payList[s].id}));t.payArr=r,t.radioChange({detail:{value:r.find((function(t){return 1==t.isDefault})).value}});case 11:case"end":return e.stop()}}),e)})))()},formSubmit:function(e){var a=this;return(0,r.default)((0,n.default)().mark((function i(){var r,o;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!a.payObj||"jfsc"!=a.payObj.orderType){i.next=5;break}return i.next=3,a.util.request({url:a.api.jfsplb,method:"POST",ct:1});case 3:return i.next=5,a.$emit("zfPay");case 5:return r=a.payObj=s.default.deepCopy(a.payObj),a.loading=!0,i.next=9,a.util.request({url:a.api.orderPay,method:"POST",mask:1,data:r});case 9:o=i.sent,o?e.detail&&"ye"!=e.detail.value.radiogroup||"cz"==e?(t.log("112"),o.data&&(t.log(o.data.pay_content),window.location=o.data.pay_content)):(a.util.message(o.msg,o.data?1:2),a.ctx(),a.close()):a.loading=!1;case 11:case"end":return i.stop()}}),i)})))()},ctx:function(){var t=this;setTimeout((function(){t.go({t:t.payObj.go&&t.payObj.go.t,url:t.payObj.go&&t.payObj.go.url})}),500)},gUser:function(){this.uId&&this.refreshUser({nomask:1,get:1,now:1})},cPay:function(e){var a=this;return(0,r.default)((0,n.default)().mark((function e(){var i,r;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.util.request({url:"".concat(a.api.pQuery,"/").concat(a.payObj.orderSn)});case 2:i=e.sent,r=i.data,t.log("data",r),r&&r.state>=2?(a.util.message("支付成功",1),a.ctx(),a.close()):(a.util.message("支付失败",3),a.close());case 6:case"end":return e.stop()}}),e)})))()}}});e.default=o}).call(this,a("ba7c")["default"])},bf7f:function(t,e,a){var i=a("d566");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("41b3e52d",i,!0,{sourceMap:!1,shadowMode:!1})},c45d:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"bf bdr"},[a("v-uni-view",{staticClass:"b-b-e p32 posi-r"},[a("v-uni-image",{staticClass:"bgimg posi-a",attrs:{src:t.mrtxImg}}),a("v-uni-view",{staticClass:"f-bt"},[a("v-uni-view",{staticClass:"f-g-1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goSelect.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"wei f38"},[t._v(t._s(t.storeInfo.name||t.$t("integral.please_select_store"))),a("v-uni-text",{staticClass:"iconfont icon-youjiantou f32 mr10 c3 mt5"})],1),t.storeInfo&&t.storeInfo.address?a("v-uni-view",{staticClass:"mt10"},[t._v(t._s(t.storeInfo.address))]):t._e()],1),a("v-uni-view",{staticClass:"f-g-0"},[t.storeInfo&&t.storeInfo.distance?a("v-uni-text",{staticClass:"bf f20 wei p-r distance-text"},[t._v(t._s(t.$t("integral.distance_from_you"))+t._s(t.storeInfo.distance))]):t._e(),a("v-uni-view",{staticClass:"t-c"},[a("v-uni-text",{staticClass:"icon iconfont icon-dingwei f50 c9"})],1)],1)],1)],1),a("v-uni-view",{staticClass:"b-b-e f-bt p32"},[a("v-uni-view",{staticClass:"f-g-0 wei"},[t._v(t._s(t.$t("integral.contact_phone_number")))]),a("v-uni-view",{staticClass:"f-g-1 f-x-e"},[a("v-uni-view",{staticClass:"mr20"},[a("v-uni-input",{staticClass:"t-r",attrs:{type:"text"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.iMobile.apply(void 0,arguments)}},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),t.user&&t.user.mobile?a("v-uni-button",{staticClass:"f24 l-h1 f-c bs5",style:{color:t.tColor,borderColor:t.tColor},attrs:{type:"primary",plain:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.auZdtx.apply(void 0,arguments)}}},[t._v(t._s(t.$t("integral.auto_fill")))]):t._e()],1)],1)],1)},n=[]},ce22:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.tit[data-v-f383cf38]{background:#f2f0f3;height:%?100?%}.tit .cIcon[data-v-f383cf38]{top:%?26?%;right:%?30?%}.weui-cell[data-v-f383cf38]{padding:%?40?% %?35?% %?40?%;border-radius:%?20?%}.weui-cell-hover[data-v-f383cf38]{border:%?2?% solid #f98811;background:linear-gradient(180deg,#fbf4e2,#f9eed8);color:#333}.weui-cell[data-v-f383cf38]:last-child:after{display:block}.weui-cell__bd[data-v-f383cf38]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.weui-cell[data-v-f383cf38]:after{left:%?112?%}.hdimg[data-v-f383cf38]{width:%?49?%;height:%?49?%;margin-right:%?30?%}.right30[data-v-f383cf38]::after{right:%?30?%}.foot-btn[data-v-f383cf38]{background:#007a53}.yuan[data-v-f383cf38]{width:%?40?%;height:%?40?%;border-radius:50%;border:%?2?% solid #ccc;z-index:10}',""]),t.exports=e},d435:function(t,e,a){"use strict";a.r(e);var i=a("16b9"),n=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);e["default"]=n.a},d468:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.utilMixins=e.sljz=void 0,a("5ef2"),a("64aa");var n=i(a("9b1b")),r=a("8f59"),s=i(a("77a5")),o={data:function(){return{dataList:[],bfList:[],isget:!1,mygd:!1}},onReachBottom:s.default.debounce((function(t){!this.mygd&&this.isget&&(this.isget=!1,this.getList())}),300)};e.sljz=o;var c={computed:(0,n.default)({},(0,r.mapState)({})),methods:{timeToDate:function(t,e){return s.default.timeToDate(t,e)},dateToTime:function(t){return s.default.dateToTime(t)},getSingleImg:function(t){return t.indexOf("http")>-1?t:this.url+t},snText:function(t,e){return t&&t.length>e?t.substring(0,e)+"...":t},blxs:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(Number(t).toFixed(e))},payName:function(t){var e="";switch(+t){case 1:e="微信支付";break;case 2:e="支付宝支付";break;case 3:e="百度支付";break;case 5:e="余额支付";break}return e},cTR:function(t){return s.default.colorToRGB(t)},cTRld:function(t,e){return s.default.ldColor(t,e)}}};e.utilMixins=c},d566:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.bor-b[data-v-a87cce5c]{border-bottom:1px solid #eff3f6}.bor-t[data-v-a87cce5c]{border-top:1px solid #eff3f6}.imgw[data-v-a87cce5c]{width:%?130?%;height:%?130?%}.pstypec[data-v-a87cce5c]{width:%?180?%;height:%?58?%;border:%?1?% solid #ddd;border-radius:28px}.qrdh[data-v-a87cce5c]{border-radius:%?48?%}.pro-img[data-v-a87cce5c]{width:%?120?%;height:%?90?%;flex-shrink:0}.type[data-v-a87cce5c]{height:%?50?%;border-radius:%?20?%}.type .leftActive[data-v-a87cce5c]{position:absolute;bottom:0;left:0;height:%?70?%;line-height:%?70?%;font-size:%?30?%;font-weight:700;border-radius:%?20?%;background:#fff}.type .leftInactive[data-v-a87cce5c]{position:absolute;left:0;height:100%;height:%?70?%;line-height:%?70?%;font-size:%?26?%;background:#e8e8e8;border-radius:%?20?% 0 %?20?% 0}.type .rightActive[data-v-a87cce5c]{position:absolute;bottom:0;right:0;height:%?70?%;font-size:%?30?%;line-height:%?70?%;font-weight:700;border-radius:%?20?%;background:#fff}.type .rightInactive[data-v-a87cce5c]{position:absolute;right:0;height:100%;height:%?70?%;font-size:%?26?%;line-height:%?70?%;background:#e8e8e8;border-radius:0 %?20?% 0 %?20?%}',""]),t.exports=e},d63b:function(t,e,a){"use strict";a.r(e);var i=a("d68c"),n=a("4bad");for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);a("e13c");var s=a("828b"),o=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"a87cce5c",null,!1,i["a"],void 0);e["default"]=o.exports},d68c:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return i}));var i={pay:a("1e12").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"pb130 p2"},[t.ModeArr.length>1?a("v-uni-view",{staticClass:"bf mla mt20 pb20"},[a("v-uni-view",{staticClass:"p-r bf flex type"},t._l(t.ModeArr,(function(e,i){return a("v-uni-view",{key:i,staticClass:"w50 t-c wei t-o-e",class:t.deliveryMode==e.value?e.acname:e.cname,on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.changeDeliveryMode(e)}}},[t.deliveryMode==e.value?a("v-uni-text",{staticClass:"iconfont c3 f40 mr10",class:e.icon}):t._e(),t._v(t._s(e.name))],1)})),1)],1):t._e(),2==t.deliveryMode?a("v-uni-view",[a("self-fetch-addres",{attrs:{dl:t.checkData.goods,mobile:t.params.mobile,current:t.current,cd:t.cd,storeInfo:t.storeInfo},on:{radioChange:function(e){arguments[0]=e=t.$handleEvent(e),t.radioChange.apply(void 0,arguments)},selectTime:function(e){arguments[0]=e=t.$handleEvent(e),t.selectTime.apply(void 0,arguments)},auZdtx:function(e){arguments[0]=e=t.$handleEvent(e),t.setMobile.apply(void 0,arguments)},handstore:function(e){arguments[0]=e=t.$handleEvent(e),t.handstore.apply(void 0,arguments)}}})],1):t._e(),1==t.deliveryMode?a("v-uni-view",[a("take-out-addres",{attrs:{yjrV:t.yjrV,dl:t.checkData.order,cd:t.cd},on:{selectTime:function(e){arguments[0]=e=t.$handleEvent(e),t.selectTime.apply(void 0,arguments)}}})],1):t._e(),t.checkData.goods?a("v-uni-view",{staticClass:"f-bt mb30 bf p2 mt20"},[a("v-uni-view",{staticClass:"f-g-0 mr10"},[a("v-uni-image",{staticClass:"pro-img bs10",attrs:{src:t.checkData.goods.icon,mode:"aspectFit"}})],1),a("v-uni-view",{staticClass:"f-g-1 f-bt ml10 flex"},[a("v-uni-view",{staticClass:"f-g-1 f-y-bt"},[a("v-uni-view",{staticClass:"f28 wei"},[t._v(t._s(t.checkData.goods.name))]),a("v-uni-view",{staticClass:"c9 f28"},[t._v("x1")])],1),t.checkData.goods?a("v-uni-view",{staticClass:"t-o-e f30 f-g-0 neutra-font",style:{color:t.tColor}},[t.checkData.goods.integral>0?a("v-uni-text",{staticClass:"f36 wei"},[t._v(t._s(t.checkData.goods.integral))]):t._e(),t.checkData.goods.integral>0?a("v-uni-text",{staticClass:"f22 c9 nowei ml10"},[t._v(t._s(t.$t("integral.points")))]):t._e(),t.checkData.goods.integral>0&&t.checkData.goods.money>0?a("v-uni-text",{staticClass:"nowei c9"},[t._v("+")]):t._e(),t.checkData.goods.money>0?a("v-uni-text",{staticClass:"f36 wei"},[t._v(t._s(t.checkData.goods.money)),a("v-uni-text",{staticClass:"f22 c9"},[t._v("THB")])],1):t._e()],1):t._e()],1)],1):t._e(),1==t.deliveryMode?a("v-uni-view",{staticClass:"f-bt bf p2 bs10"},[a("v-uni-view",{staticClass:"f-g-1"},[t._v(t._s(t.$t("integral.courier_fee")))]),a("v-uni-view",{staticClass:"f-g-0 neutra-font"},[t._v("฿"+t._s(t.checkData.goods&&t.checkData.goods.delivery_fee))])],1):t._e(),a("check-save",{style:t.style,attrs:{dl:t.checkData.order,pl:t.params},on:{spay:function(e){arguments[0]=e=t.$handleEvent(e),t.savePay.apply(void 0,arguments)}}}),a("pay",{ref:"Pay",on:{pay:function(e){arguments[0]=e=t.$handleEvent(e),t.cPay.apply(void 0,arguments)},zfPay:function(e){arguments[0]=e=t.$handleEvent(e),t.zfPay.apply(void 0,arguments)}}})],1)},r=[]},dcb8:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("9b1b")),r=a("8f59"),s={name:"checkGoods",components:{},props:{dl:{type:Object,default:{}},pl:{type:Object,default:{}},style:{type:Object,default:{}}},computed:(0,n.default)((0,n.default)({},(0,r.mapState)(["sjxx"])),(0,r.mapState)({})),data:function(){return{}},methods:{jxdc:function(){this.go({t:4})},savePay:function(){this.$emit("spay")}}};e.default=s},de79:function(t,e,a){var i=a("f232");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("4b9f1a96",i,!0,{sourceMap:!1,shadowMode:!1})},deef:function(t,e,a){"use strict";var i=a("de79"),n=a.n(i);n.a},e13c:function(t,e,a){"use strict";var i=a("bf7f"),n=a.n(i);n.a},f232:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */@-webkit-keyframes backOpacity-data-v-5a147d10{0%{opacity:0}25%{opacity:.2}50%{opacity:.5}75%{opacity:.2}100%{opacity:0}}@keyframes backOpacity-data-v-5a147d10{0%{opacity:0}25%{opacity:.2}50%{opacity:.5}75%{opacity:.2}100%{opacity:0}}.animation_opactiy[data-v-5a147d10]{-webkit-animation:backOpacity-data-v-5a147d10 1s ease-in-out infinite;animation:backOpacity-data-v-5a147d10 1s ease-in-out infinite}.jzzc[data-v-5a147d10]{width:%?300?%;height:%?300?%;position:fixed;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.weui-loading[data-v-5a147d10]{width:%?80?%;height:%?80?%}',""]),t.exports=e}}]);