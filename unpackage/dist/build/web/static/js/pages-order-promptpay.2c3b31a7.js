(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-promptpay"],{"10d8":function(t,n,e){"use strict";e.r(n);var i=e("e256"),a=e("2d03");for(var r in a)["default"].indexOf(r)<0&&function(t){e.d(n,t,(function(){return a[t]}))}(r);e("9d88");var o=e("828b"),s=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"d0d531e6",null,!1,i["a"],void 0);n["default"]=s.exports},"2d03":function(t,n,e){"use strict";e.r(n);var i=e("5573"),a=e.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(r);n["default"]=a.a},5573:function(t,n,e){"use strict";(function(t){e("6a54");var i=e("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("c223");i(e("77a5")),i(e("5137"));var a={data:function(){return{order:{},imagesrc:"",orderSn:"",orderType:0,payId:0,timer:null,checkPaymentTimer:null,totalTime:627}},onLoad:function(n){n&&n.orderSn&&(this.orderSn=n.orderSn),n&&n.orderType&&(this.orderType=n.orderType),n&&n.payId&&(this.payId=n.payId),t.log("1212",this.orderSn),this.orderSn&&(this.getorder(),this.promptpay())},computed:{minutes:function(){return Math.floor(this.totalTime/60)},seconds:function(){return this.totalTime%60}},onShow:function(){this.startCountdown(),this.startCheckPayment()},onHide:function(){this.clearCountdown(),this.clearCheckPayment()},onUnload:function(){this.clearCountdown(),this.clearCheckPayment()},methods:{startCountdown:function(){var t=this;this.timer=setInterval((function(){t.totalTime>0?t.totalTime--:t.cancelOrder()}),1e3)},clearCountdown:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},cancelOrder:function(){this.clearCountdown(),t.log("订单已取消")},promptpay:function(){var n=this;if(this.orderSn){var e={orderSn:this.orderSn,orderType:this.orderType,payId:this.payId};this.util.request({url:this.api.orderPay,method:"POST",mask:1,data:e}).then((function(e){e&&(t.log(e),e.data.imgdat||n.go({t:6,url:"/pages/index/order-index"}),n.imagesrc=e.data.imgdat)}))}},startCheckPayment:function(){var t=this;this.checkPaymentTimer=setInterval((function(){t.checkPaymentStatus()}),3e3)},clearCheckPayment:function(){this.checkPaymentTimer&&(clearInterval(this.checkPaymentTimer),this.checkPaymentTimer=null)},getorder:function(){var n=this;this.util.request({url:"".concat(this.api.pay,"/").concat(this.orderSn)}).then((function(e){t.log(e),e&&(n.order=e.data,t.log(n.order))}))},checkPaymentStatus:function(){var n=this;this.util.request({url:"".concat(this.api.pQuery,"/").concat(this.orderSn)}).then((function(e){t.log("1212",e),e&&e&&e.data.state>=2&&n.go({t:6,url:"/pages/index/order-index"})}))}}};n.default=a}).call(this,e("ba7c")["default"])},"987b":function(t,n,e){var i=e("c86c");n=i(!1),n.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.container[data-v-d0d531e6]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;font-family:Arial,sans-serif;padding:16px;width:100%;box-sizing:border-box;\n  /* 确保内边距不会增加总宽度 */\n  /* 添加底部圆角 */border-bottom-left-radius:20px;\n  /* 左下角圆角半径 */border-bottom-right-radius:20px;\n  /* 右下角圆角半径 */\n  /* 根据需要添加其他样式，如背景颜色等 */background-color:#fff;\n  /* 举例：白色背景 */\n  /* 添加阴影效果提升层次感（可选） */box-shadow:0 4px 8px rgba(0,0,0,.1)}\n/* 标题样式 */.title[data-v-d0d531e6]{font-size:24px;font-weight:700;margin-bottom:32px}\n/* QR码样式 */.qr-container[data-v-d0d531e6]{width:60%;\n  /* 根据实际需求调整 */margin-bottom:24px}\n/* 支付信息样式 */.payment-info[data-v-d0d531e6]{text-align:center;margin-bottom:16px}.amount[data-v-d0d531e6]{font-size:20px;font-weight:700;color:#000;margin-bottom:8px}.time-left[data-v-d0d531e6]{font-size:16px;color:#555}\n/* 说明文本样式 */.instructions[data-v-d0d531e6]{font-size:14px;color:#666;text-align:center;margin-bottom:24px}\n/* 警告信息样式 */.warning[data-v-d0d531e6]{font-size:14px;color:red;text-align:center}',""]),t.exports=n},"9d88":function(t,n,e){"use strict";var i=e("db72"),a=e.n(i);a.a},db72:function(t,n,e){var i=e("987b");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=e("967d").default;a("6b086a96",i,!0,{sourceMap:!1,shadowMode:!1})},e256:function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){}));var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",{staticClass:"container"},[e("v-uni-view",{staticClass:"qr-container"},[e("v-uni-image",{staticStyle:{width:"236px",height:"236px"},attrs:{src:t.imagesrc}})],1),e("v-uni-view",{staticClass:"payment-info"},[e("v-uni-text",{staticClass:"amount"},[t._v(t._s(t.$t("promptpay.payment_info"))+": ฿"+t._s(t.order.money))]),e("v-uni-text",{staticClass:"time-left",staticStyle:{display:"none"}},[t._v(t._s(t.$t("promptpay.time_left"))+": "+t._s(t.minutes)+" "+t._s(t.$t("promptpay.minutes"))+" "+t._s(t.seconds)+"\n\t\t\t"+t._s(t.$t("promptpay.seconds")))])],1),e("v-uni-view",{staticClass:"instructions"},[e("v-uni-text",[t._v(t._s(t.$t("promptpay.scan_to_pay")))]),e("v-uni-text",[t._v(t._s(t.$t("promptpay.auto_redirect")))])],1),e("v-uni-view",{staticClass:"warning"},[e("v-uni-text",[t._v(t._s(t.$t("promptpay.note")))])],1)],1)},a=[]}}]);