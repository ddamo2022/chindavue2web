{"version":3,"sources":["uni-app:///main.js","webpack:///H:/work/ybv3前端0126/用户端小程序/pages/index/goods.vue?d3f5","webpack:///H:/work/ybv3前端0126/用户端小程序/pages/index/goods.vue?8de4","webpack:///H:/work/ybv3前端0126/用户端小程序/pages/index/goods.vue?2c47","webpack:///H:/work/ybv3前端0126/用户端小程序/pages/index/goods.vue?3e2a","uni-app:///pages/index/goods.vue","webpack:///H:/work/ybv3前端0126/用户端小程序/pages/index/goods.vue?eba3","webpack:///H:/work/ybv3前端0126/用户端小程序/pages/index/goods.vue?6dd3"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","uniNavBar","BarLeft","ChangeShop","ShopNotice","Actions","ProductModal","CartBar","cartPopup","businessStatus","load","sqBtn","iDefault","gAd","picLunboBy","tcyhq","classTs1","classTs2","classTs3","classTs4","rollBag","rollPopup","data","loading","mainRef","categories","cart","sIndex","rectInfoList","tempCurrent","scrollTop","product","ccId","notices","productModalVisible","cartPopupShow","pstop","showSearch","showShopInfo","diningType","xdtype","goodsAd","swiper","imgUrl","height","circle","wcshow","wcInfo","rollOrder","categoryGoods","onShow","id","computed","storeBasicSetting","orderSetting","scarList","gs","mixins","onLoad","console","tid","key","q1","methods","ident","uni","getDw","t","lc","lat","lng","res","url","init","storeId","getCategory","params","dType","getCategoryGoods","categoryId","refresh","location","getWc","pos","setTimeout","gRollOrder","cDiningType","sjsz","switchOrderType","isChange","handcar","spuId","specMd5","singleSpec","attrData","materialSwitch","spec","attr","matal","material","num","handdl","handleAddToCartInModal","closeProductDetailModal","openCartDetailsPopup","clearCart","handMenu","psroll","detail","rfcalc","calcSize","view","size","h","rect","item","pay","carr","serach","rollOpen","onShareAppMessage","p","i"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtBA;AAAA;AAAA;AAAA;AAA+lB,CAAgB,ynBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;AC6DnnB;AAKA;AAGA;AAsBA;AAEA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eACA;EACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACA;MACA;IACA;IACA;MACA;IACA;IACA;MACA;QAAAC;MAAA;IACA;EACA;EACAC,wDACA,0CACA,0CACA;IACAC;MAAA;IAAA;IACA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;EACA,GAYA;EACAC;EACAC;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACAC;cACAC;gBACAC;gBACAC;cACA;cACA;cACA;cACAH;cAAA;cAAA,OACA;YAAA;cACA;gBACA;kBAAAR;gBAAA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EACA;EACAY,uDACA,qFACA;IACArD;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBACA;gBACA;kBACAsD;gBACA;gBACAC;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;kBACAC;gBACA;cAAA;gBAFAC;gBAGA;gBACA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;kBACA;kBACA9C;oBACA+C;oBACAC;kBACA;gBACA;cAAA;gBANAC;gBAOA;kBACA;kBACA;gBACA;kBACA;oBACAJ;oBACAK;kBAEA;gBACA;gBAAA;gBAAA;cAAA;gBAEA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAC;MAAA;MAAA;QAAA;UAAA;YA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AAA;YAAA;cAAA;gBACApC;gBAAA,MACAlC;kBAAA;kBAAA;gBAAA;gBACA;kBACAoC;kBACAK;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAEA;kBACA;kBACAlD;oBACAoD;oBACAnC;kBACA;gBACA;cAAA;gBANAgC;gBAOA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA+B;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;MACAnB;QACA;MACA;IACA;IACAoB;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;QACA;QACA;QACA;MACA;QACA;QACA;UAAA;QAAA;QACA;QACA;UAAA;QAAA;MACA;IACA;IACAC,8BAEA;MAAA;MAAA,IADAC;MAEA,IACA9E,YACA8E,OADA9E;MAEA;MACA;QAAA;MAAA;MACA;QACA;MACA;MACA;QACA;UACA;UACA;QACA;MACA;IACA;IACA+E;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;MACAC;QACAC;MACA;QACAC;MACA;MACA;QACA;QACAF;UACAC;UACAE;QACA;UACAC;UACAF;UACAE;UACA;YACA;YACA;UACA;QACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;cAAA;gBAGA7B;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;cAAA;gBAAA,KAGA;kBAAA;kBAAA;gBAAA;gBAAA;kBACA;sBAAA;oBAAA;oBACAa;oBACAiB;sBAAA;oBAAA;kBACA;oBACA;sBACA;wBACAjB;sBACA;oBACA;kBACA;oBACA;sBACA;wBAAA;sBAAA;wBACAA;sBACA;oBACA;kBACA;kBACA;oBACA;sBAAA;oBAAA;kBACA;kBACA;gBAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAA,IAEA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEA;gBAAA;cAAA;gBAIAnC;kBACAO;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA8C;MACA;QACAnD;QACAK;MACA;IACA;IACA+C;MACA;IACA;EAAA,EACA;EACAC;IACA;IACA;MACAC;IACA;IACA;MACAtD;MACAuD;MACAD;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACzmBA;AAAA;AAAA;AAAA;AAAkqC,CAAgB,woCAAG,EAAC,C;;;;;;;;;;;ACAtrC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/goods.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/goods.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./goods.vue?vue&type=template&id=57ad8b70&scoped=true&\"\nvar renderjs\nimport script from \"./goods.vue?vue&type=script&lang=js&\"\nexport * from \"./goods.vue?vue&type=script&lang=js&\"\nimport style0 from \"./goods.vue?vue&type=style&index=0&id=57ad8b70&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57ad8b70\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/goods.vue\"\nexport default component.exports","export * from \"-!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./goods.vue?vue&type=template&id=57ad8b70&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.rollOrder && _vm.rollOrder.length\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.wcshow = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./goods.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./goods.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"bf h100v container\">\r\n\t\t<view class=\"header\">\r\n\t\t\t<uni-nav-bar id='uninavbar' :uropcity=\"0\" :uriconopcity='0' :fixed='false' :ispr='false' :border='false'\r\n\t\t\t\t:statusBar=\"true\" :isleft='false'>\r\n\t\t\t\t<view slot='left' class=\"f-c c0\" v-if=\"orderSetting.together == 1\">\r\n\t\t\t\t\t<bar-left></bar-left>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"f-x-e f-g-1\">\r\n\t\t\t\t\t<view class=\"search bsf f-c\" @click.stop=\"serach\"><text class=\"iconfont icon-sousuo f32 c9\"></text></view>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-nav-bar>\r\n\t\t\t<change-shop @dining-type=\"switchOrderType\" @init=\"init\" :xdtype=\"xdtype\"></change-shop>\r\n\t\t\t<shop-notice></shop-notice>\r\n\t\t</view>\r\n\t\t<class-ts2 v-if=\"gs && gs.selfStyle==2\" ref=\"classTs\" :cs=\"categories\" :st=\"scrollTop\" :sx=\"sIndex\" :cd=\"ccId\"\r\n\t\t\t@handMenu=\"handMenu\" :scarList=\"scarList\" :str=\"pstop\" @psroll=\"psroll\" @handdl=\"handdl\" @handcar=\"handcar\"\r\n\t\t\t@rfcalc=\"rfcalc\" class=\"main\" :orSet=\"orderSetting\" :swiper=\"swiper\" :cgs=\"categoryGoods\" :gs='gs'></class-ts2>\r\n\t\t<class-ts3 v-else-if=\"gs && gs.selfStyle==3\" ref=\"classTs\" :cs=\"categories\" :st=\"scrollTop\" :sx=\"sIndex\"\r\n\t\t\t:cd=\"ccId\" @handMenu=\"handMenu\" :scarList=\"scarList\" :str=\"pstop\" @psroll=\"psroll\" @handdl=\"handdl\"\r\n\t\t\t@handcar=\"handcar\" @rfcalc=\"rfcalc\" class=\"main\" :orSet=\"orderSetting\" :swiper=\"swiper\" :cgs=\"categoryGoods\" :gs='gs'></class-ts3>\r\n\t\t<class-ts4 v-else-if=\"gs && gs.selfStyle==4\" ref=\"classTs\" :cs=\"categories\" :st=\"scrollTop\" :sx=\"sIndex\"\r\n\t\t\t:cd=\"ccId\" @handMenu=\"handMenu\" :scarList=\"scarList\" :str=\"pstop\" @psroll=\"psroll\" @handdl=\"handdl\"\r\n\t\t\t@handcar=\"handcar\" @rfcalc=\"rfcalc\" class=\"main\" :orSet=\"orderSetting\" :swiper=\"swiper\" :cgs=\"categoryGoods\" :gs='gs'></class-ts4>\r\n\t\t<class-ts1 v-else ref=\"classTs\" :cs=\"categories\" :st=\"scrollTop\" :sx=\"sIndex\" :cd=\"ccId\" @handMenu=\"handMenu\"\r\n\t\t\t:scarList=\"scarList\" :str=\"pstop\" @psroll=\"psroll\" @handdl=\"handdl\" @handcar=\"handcar\" @rfcalc=\"rfcalc\"\r\n\t\t\tclass=\"main\" :orSet=\"orderSetting\" :swiper=\"swiper\" :cgs=\"categoryGoods\" :gs='gs'>\r\n\t\t\t\t<!-- <view slot='swiper' id=\"ads\" v-if=\"swiper && swiper.imgUrl.length\">\r\n\t\t\t\t\t<picLunbo-by :co='swiper' u='rpx' :color='tColor'></picLunbo-by>\r\n\t\t\t\t</view> -->\r\n\t\t\t</class-ts1>\r\n\t\t<block v-if=\"rollOrder && rollOrder.length\">\r\n\t\t\t<rollBag @open=\"rollOpen\" />\r\n\t\t\t<rollPopup ref=\"rollPopup\" :rr=\"rollOrder\" />\r\n\t\t</block>\r\n\t\t<business-status :cd=\"scarList\" />\r\n\t\t<block v-if=\"goodsAd\">\r\n\t\t\t<g-ad :co=\"goodsAd\"></g-ad>\r\n\t\t</block>\r\n\t\t<tcyhq v-if='wcInfo' type=\"1\" @close='wcshow=false' :co='wcInfo' v-model=\"wcshow\"></tcyhq>\r\n\t\t<block v-if=\"scarList.realtimeState!=3\">\r\n\t\t\t<product-modal ref=\"productModal\" :product=\"product\" :visible=\"productModalVisible\"\r\n\t\t\t\t@cancel=\"closeProductDetailModal\" @add-to-cart=\"handleAddToCartInModal\" @pay=\"pay\" :orSet=\"orderSetting\" :storeId=\"storeId\"></product-modal>\r\n\t\t\t<view class=\"\">\r\n\t\t\t\t<cart-bar :cart=\"scarList\" @add=\"handcar\" @minus=\"handcar\" @clear=\"clearCart\" @pay=\"pay\">\r\n\t\t\t\t</cart-bar>\r\n\t\t\t</view>\r\n\t\t</block>\r\n\t\t<view class=\"posi-r\">\r\n\t\t\t<tab-bar />\r\n\t\t</view>\r\n\t\t<load v-if=\"loading\"></load>\r\n\t\t<sq-btn type=\"1\" :lType=\"2\" ref=\"sqBtn\"></sq-btn>\r\n\t</view>\r\n\r\n\t<!-- <view class=\"loading\" v-else>\r\n\t\t<image src=\"/static/images/loading.gif\"></image>\r\n\t</view> -->\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapMutations,\r\n\t\tmapActions\r\n\t} from 'vuex'\r\n\timport {\r\n\t\tgetDw\r\n\t} from \"@/common/wechat-util.js\"\r\n\timport utils from '@/common/utils.js'\r\n\timport uniNavBar from \"@/components/third/uni-nav-bar.vue\"\r\n\timport BarLeft from \"./goods/gtop/bar-left.vue\"\r\n\timport ChangeShop from \"./goods/gtop/change-shop.vue\"\r\n\timport ShopNotice from \"@/components/goods/shop-notice.vue\"\r\n\timport Actions from \"@/components/goods/actions/actions.vue\"\r\n\timport ProductModal from '@/components/goods/product-modal/product-modal.vue'\r\n\timport CartBar from '@/components/goods/cartbar/cartbar.vue'\r\n\timport cartPopup from '@/components/goods/cart-popup/cart-popup.vue'\r\n\timport businessStatus from './goods/business.vue'\r\n\timport load from '@/components/common/load.vue'\r\n\timport sqBtn from '@/components/common/sq-btn.vue'\r\n\timport iDefault from '@/components/common/default.vue'\r\n\timport gAd from '@/components/drag/ad.vue';\r\n\timport picLunboBy from '@/components/drag/picLunbo.vue';\r\n\timport tcyhq from '@/components/template/tcyhq.vue'\r\n\timport classTs1 from '@/components/goods/template/class-ts1.vue'\r\n\timport classTs2 from '@/components/goods/template/class-ts2.vue'\r\n\timport classTs3 from '@/components/goods/template/class-ts3.vue'\r\n\timport classTs4 from '@/components/goods/template/class-ts4.vue'\r\n\timport rollBag from \"./goods/rollBag/rollBag.vue\"\r\n\timport rollPopup from \"./goods/rollBag/rollPopup.vue\"\r\n\timport {\r\n\t\tutilMixins\r\n\t} from \"@/common/util-mixins.js\"\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tuniNavBar,\r\n\t\t\tBarLeft,\r\n\t\t\tChangeShop,\r\n\t\t\tShopNotice,\r\n\t\t\tActions,\r\n\t\t\tProductModal,\r\n\t\t\tCartBar,\r\n\t\t\tcartPopup,\r\n\t\t\tbusinessStatus,\r\n\t\t\tload,\r\n\t\t\tsqBtn,\r\n\t\t\tiDefault,\r\n\t\t\tgAd,\r\n\t\t\tpicLunboBy,\r\n\t\t\ttcyhq,\r\n\t\t\tclassTs1,\r\n\t\t\tclassTs2,\r\n\t\t\tclassTs3,\r\n\t\t\tclassTs4,\r\n\t\t\trollBag,\r\n\t\t\trollPopup,\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tloading: true,\r\n\t\t\t\tmainRef: null,\r\n\t\t\t\tcategories: [],\r\n\t\t\t\tcart: [],\r\n\t\t\t\tsIndex: 0,\r\n\t\t\t\trectInfoList: [],\r\n\t\t\t\ttempCurrent: 0,\r\n\t\t\t\tscrollTop: 0,\r\n\t\t\t\tproduct: {},\r\n\t\t\t\tccId: 0,\r\n\t\t\t\tnotices: [],\r\n\t\t\t\tproductModalVisible: false,\r\n\t\t\t\tcartPopupShow: false,\r\n\t\t\t\tpstop: 0,\r\n\t\t\t\tshowSearch: false,\r\n\t\t\t\tshowShopInfo: false,\r\n\t\t\t\tdiningType: '',\r\n\t\t\t\txdtype: '',\r\n\t\t\t\tgoodsAd: [],\r\n\t\t\t\tswiper: {\r\n\t\t\t\t\timgUrl: [],\r\n\t\t\t\t\theight: '260',\r\n\t\t\t\t\tcircle: '30'\r\n\t\t\t\t},\r\n\t\t\t\twcshow: false,\r\n\t\t\t\twcInfo: '',\r\n\t\t\t\trollOrder:[],\r\n\t\t\t\tcategoryGoods:[],\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tif (uni.getStorageSync('xdtype')) {\r\n\t\t\t\tthis.xdtype = uni.getStorageSync('xdtype')\r\n\t\t\t\tthis.diningType = this.xdtype == 1 ? 0 : 1\r\n\t\t\t}\r\n\t\t\tif (this.isload) {\r\n\t\t\t\tthis.refresh()\r\n\t\t\t}\r\n\t\t\tif (uni.getStorageSync('hGoodsId') && this.storeId) {\r\n\t\t\t\tthis.handdl({id:uni.getStorageSync('hGoodsId')})\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['sjxx', 'sjgood']),\r\n\t\t\t...mapState('dndc', ['latLng']),\r\n\t\t\t...mapState({\r\n\t\t\t\tstoreBasicSetting: state => state.config.storeBasicSetting,\r\n\t\t\t\t// integralSettingcustomTxt: state => state.config.integralSettingcustomTxt,\r\n\t\t\t\torderSetting: state => state.config.orderSetting,\r\n\t\t\t\tscarList: state => state.scarList.out || [],\r\n\t\t\t\tgs: state => state.layout.goodStyle || {},\r\n\t\t\t}),\r\n\t\t\t// ztqs() {\r\n\t\t\t// \treturn `rgba(${this.cTR(this.tColor)},0.1)`\r\n\t\t\t// },\r\n\t\t\t// gcnum() {\r\n\t\t\t// \treturn id => this.scarList.goodsList.reduce((acc, cur) => {\r\n\t\t\t// \t\tif (cur.spuId === id) {\r\n\t\t\t// \t\t\treturn acc += cur.num\r\n\t\t\t// \t\t}\r\n\t\t\t// \t\treturn acc\r\n\t\t\t// \t}, 0)\r\n\t\t\t// },\r\n\t\t},\r\n\t\tmixins: [utilMixins],\r\n\t\tasync onLoad(options) {\r\n\t\t\tconsole.log('options', options)\r\n\t\t\tlet tid = utils.getOptions(options, {\r\n\t\t\t\tkey: 'storeId',\r\n\t\t\t\tq1: options.storeId,\r\n\t\t\t})\r\n\t\t\tthis.loading = true\r\n\t\t\tthis.storeId = tid || uni.getStorageSync('storeId')\r\n\t\t\tconsole.log('storeId', this.storeId)\r\n\t\t\tawait this.load(this.storeId)\r\n\t\t\tif(options && options.goodId){\r\n\t\t\t\tthis.handdl({id:options.goodId})\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapActions([\"getSjxx\", \"getConfig\", \"getGoods\", \"supdCar\", \"getMycar\"]),\r\n\t\t\t...mapMutations([\"setScarList\",\"setGoods\"]),\r\n\t\t\tasync load(sid) {\r\n\t\t\t\tawait this.getLoginInfo()\r\n\t\t\t\tthis.storeId = sid\r\n\t\t\t\tawait this.getDw()\r\n\t\t\t\tthis.getLayout()\r\n\t\t\t\tthis.getConfig({\r\n\t\t\t\t\tident: [\"storeBasicSetting\", \"orderSetting\"]\r\n\t\t\t\t})\r\n\t\t\t\tuni.removeStorageSync('storeId')\r\n\t\t\t},\r\n\t\t\tasync getDw() {\r\n\t\t\t\tlet lc = await getDw({\r\n\t\t\t\t\tt: 0\r\n\t\t\t\t})\r\n\t\t\t\tthis.lc = lc\r\n\t\t\t\t// await this.getAddInfo(lc)\r\n\t\t\t\tif (!this.storeId) {\r\n\t\t\t\t\tlet res = await this.util.request({\r\n\t\t\t\t\t\t'url': this.api.mrmd,\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tlat: lc.latitude || '',\r\n\t\t\t\t\t\t\tlng: lc.longitude || '',\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif (res && res.data) {\r\n\t\t\t\t\t\tthis.storeId = res.data\r\n\t\t\t\t\t\tthis.init();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.go({\r\n\t\t\t\t\t\t\tt: 2,\r\n\t\t\t\t\t\t\turl: `/pages/shop/select/index?page=goods'`,\r\n\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.init();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync init() {\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\tawait this.getSjxx({\r\n\t\t\t\t\tstoreId: this.storeId,\r\n\t\t\t\t\tlat: this.lc.latitude || '',\r\n\t\t\t\t\tlng: this.lc.longitude || '',\r\n\t\t\t\t})\r\n\t\t\t\tthis.cDiningType()\r\n\t\t\t\tif(this.gs && this.gs.goodsStyle==2){\r\n\t\t\t\t\tawait this.getCategory()\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.getGoods({\r\n\t\t\t\t\t\tstoreId: this.storeId,\r\n\t\t\t\t\t\tdiningType: this.diningType,\r\n\t\t\t\t\t}).then(()=>{\r\n\t\t\t\t\t\tthis.categories = utils.deepCopy(this.sjgood)\r\n\t\t\t\t\t\tthis.ccId = this.categories.length && this.categories[0].id\r\n\t\t\t\t\t\tthis.havebxp = this.sjgood.findIndex(v => v.isMust == 1) > -1\r\n\t\t\t\t\t\tthis.$nextTick(() => this.$refs['classTs'].calcSize())\r\n\t\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\t}).catch(()=>{\r\n\t\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tthis.getMycar({\r\n\t\t\t\t\tstoreId: this.storeId,\r\n\t\t\t\t\tdiningType: this.diningType,\r\n\t\t\t\t\tlat: this.lc.latitude || '',\r\n\t\t\t\t\tlng: this.lc.longitude || '',\r\n\t\t\t\t})\r\n\t\t\t\tthis.gAd()\r\n\t\t\t\tthis.getWc()\r\n\t\t\t\tthis.gRollOrder()\r\n\t\t\t\tthis.storeId = this.sjxx.id\r\n\t\t\t\tif (uni.getStorageSync('hGoodsId') && this.storeId) {\r\n\t\t\t\t\tthis.handdl({id:uni.getStorageSync('hGoodsId')})\r\n\t\t\t\t}\r\n\t\t\t\t// this.$nextTick(() => {\r\n\t\t\t\t// \tsetTimeout(() => {\r\n\t\t\t\t// \t\tthis.$refs['classTs'].calcSize()\r\n\t\t\t\t// \t}, 100)\r\n\t\t\t\t// })\r\n\t\t\t\t// this.$nextTick(() => this.$refs['classTs'].calcSize())\r\n\t\t\t\t// this.loading = false\r\n\t\t\t\tthis.isload = true\r\n\t\t\t},\r\n\t\t\tasync getCategory(){\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.util.request({\r\n\t\t\t\t\turl: this.api.gCategory,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tstoreId: this.storeId,\r\n\t\t\t\t\t\tdiningType: this.diningType,\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tif(data && data.length){\r\n\t\t\t\t\tthis.categories = data\r\n\t\t\t\t\tthis.havebxp = this.categories.findIndex(v => v.isMust == 1) > -1\r\n\t\t\t\t\tthis.ccId = data[0].id\r\n\t\t\t\t\tthis.setGoods({params:{storeId: this.storeId,dType: 'out'},data,})\r\n\t\t\t\t\tawait this.getCategoryGoods()\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync getCategoryGoods(){\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.util.request({\r\n\t\t\t\t\turl: this.api.goods,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tstoreId: this.storeId,\r\n\t\t\t\t\t\tdiningType: this.diningType,\r\n\t\t\t\t\t\tcategoryId:this.ccId,\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.categoryGoods = data ? data :[]\r\n\t\t\t\tthis.loading = false\r\n\t\t\t},\r\n\t\t\tasync refresh() {\r\n\t\t\t\tthis.cDiningType()\r\n\t\t\t\tawait this.getMycar({\r\n\t\t\t\t\tstoreId: this.storeId,\r\n\t\t\t\t\tdiningType: this.diningType,\r\n\t\t\t\t\tlat: this.latLng.lat ? this.latLng.lat : '',\r\n\t\t\t\t\tlng: this.latLng.lng ? this.latLng.lng : '',\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync gAd() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.util.request({\r\n\t\t\t\t\t'url': this.api.gglb,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tlocation: 2,\r\n\t\t\t\t\t\tstoreId: this.storeId\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.goodsAd = data ? data.window : []\r\n\t\t\t\tif (data.banner && data.banner.length>0) {\r\n\t\t\t\t\tfor (let k in data.banner) {\r\n\t\t\t\t\t\tdata.banner[k].url = data.banner[k].link\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.swiper = {\r\n\t\t\t\t\t\timgUrl: data.banner,\r\n\t\t\t\t\t\theight: '260',\r\n\t\t\t\t\t\tcircle: '30'\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.swiper = {\r\n\t\t\t\t\t\timgUrl: [],\r\n\t\t\t\t\t\theight: '260',\r\n\t\t\t\t\t\tcircle: '30'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync getWc() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.util.request({\r\n\t\t\t\t\t'url': this.api.wc,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tpos: 2,\r\n\t\t\t\t\t\tstoreId: this.storeId\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tif (data) {\r\n\t\t\t\t\tthis.wcInfo = data\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.wcshow = true\r\n\t\t\t\t\t}, 400)\r\n\t\t\t\t}\r\n\t\t\t\t// console.log('wc', data)\r\n\t\t\t},\r\n\t\t\tasync gRollOrder() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.util.request({\r\n\t\t\t\t\turl: this.api.couponPack,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tstoreId: this.storeId\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.rollOrder = data ? data.list : []\r\n\t\t\t},\r\n\t\t\tcDiningType() {\r\n\t\t\t\tlet arr = [],\r\n\t\t\t\t\tsjsz = this.sjxx && this.sjxx.storeSetting\r\n\t\t\t\tif (this.sjxx && sjsz && sjsz.pickupSwitch == 1 && sjsz.takeoutSwitch == 1) {\r\n\t\t\t\t\tthis.buyType = 2\r\n\t\t\t\t\tif (this.orderSetting.orderPriority == 2) {\r\n\t\t\t\t\t\tthis.buyType = 1\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.xdtype) {\r\n\t\t\t\t\t\tthis.buyType = this.xdtype\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tuni.removeStorageSync('xdtype')\r\n\t\t\t\t\t\t}, 2000)\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.diningType = this.buyType == 2 ? this.sjxx.storeSetting.defaultType : 0\r\n\t\t\t\t} else if (this.sjxx && sjsz && sjsz.pickupSwitch == 0 && sjsz.takeoutSwitch == 1) {\r\n\t\t\t\t\tthis.buyType = 1\r\n\t\t\t\t\treturn this.diningType = this.buyType == 2 ? this.sjxx.storeSetting.defaultType : 0\r\n\t\t\t\t} else if (this.sjxx && sjsz && sjsz.pickupSwitch == 1 && sjsz.takeoutSwitch == 0) {\r\n\t\t\t\t\tthis.buyType = 2\r\n\t\t\t\t\treturn this.diningType = this.buyType == 2 ? this.sjxx.storeSetting.defaultType : 0\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync switchOrderType(type) {\r\n\t\t\t\tthis.diningType = type\r\n\t\t\t\tthis.getGoods({\r\n\t\t\t\t\tstoreId: this.storeId,\r\n\t\t\t\t\tdiningType: this.diningType,\r\n\t\t\t\t}).then(()=>{\r\n\t\t\t\t\tthis.categories = utils.deepCopy(this.sjgood)\r\n\t\t\t\t\tthis.ccId = this.categories.length && this.categories[0].id\r\n\t\t\t\t\tthis.havebxp = this.sjgood.findIndex(v => v.isMust == 1) > -1\r\n\t\t\t\t\tthis.$nextTick(() => this.$refs['classTs'].calcSize())\r\n\t\t\t\t})\r\n\t\t\t\tawait this.getMycar({\r\n\t\t\t\t\tstoreId: this.storeId,\r\n\t\t\t\t\tdiningType: this.diningType,\r\n\t\t\t\t\tlat: this.lc.latitude || '',\r\n\t\t\t\t\tlng: this.lc.longitude || '',\r\n\t\t\t\t\tisChange: 1,\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync handcar(p) {\r\n\t\t\t\tconsole.log('p', p)\r\n\t\t\t\tif (!this.isLogin && !this.noLogin) {\r\n\t\t\t\t\tthis.$refs['sqBtn'].open()\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet res = await this.supdCar({\r\n\t\t\t\t\t\tstoreId: this.storeId,\r\n\t\t\t\t\t\tspuId: p.g.id,\r\n\t\t\t\t\t\tspecMd5: p.g.specSwitch ? p.g.specInfo && p.g.specInfo.specMd5 : p.g.specMd5 || p.g\r\n\t\t\t\t\t\t\t.singleSpec.specMd5,\r\n\t\t\t\t\t\tattrData: p.g.specMd5 ? p.g.attrData || {} : (p.g.specSwitch || p.g.attrSwitch || p.g\r\n\t\t\t\t\t\t\t.materialSwitch) ? {\r\n\t\t\t\t\t\t\tspec: p.g.specSwitch && p.g.ggdata ? p.g.ggdata : '',\r\n\t\t\t\t\t\t\tattr: p.g.attribute,\r\n\t\t\t\t\t\t\tmatal: p.g.jldata,\r\n\t\t\t\t\t\t\tmaterial: p.g.material,\r\n\t\t\t\t\t\t} : {},\r\n\t\t\t\t\t\t// setMealData:p.g.type==2 && p.g.setMealData ? p.g.setMealData : [],\r\n\t\t\t\t\t\tnum: p.addwz,\r\n\t\t\t\t\t\tlat: this.lc.latitude || '',\r\n\t\t\t\t\t\tlng: this.lc.longitude || '',\r\n\t\t\t\t\t\tdiningType: this.diningType,\r\n\t\t\t\t\t})\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync handdl(product) {\r\n\t\t\t\tuni.removeStorageSync('hGoodsId')\r\n\t\t\t\tif(product && product.type==2 || (this.gs && this.gs.goodsDetail==3)){\r\n\t\t\t\t\tthis.go({\r\n\t\t\t\t\t\tt: 1,\r\n\t\t\t\t\t\turl: `/pages/shop/good-dl?goodId=${product.id}&storeId=${this.storeId}&diningType=${this.diningType}&dType=out`,\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet res = await this.util.request({\r\n\t\t\t\t\t\t'url': `${this.api.goods}/${product.id}`,\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tstoreId: this.storeId,\r\n\t\t\t\t\t\t\tdiningType: this.diningType\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.product = res.data\r\n\t\t\t\t\tthis.productModalVisible = true\r\n\t\t\t\t\tthis.$refs['productModal'].open(product, this.storeId,this.diningType)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleAddToCartInModal(product) {\r\n\t\t\t\tthis.handcar(product)\r\n\t\t\t\tthis.closeProductDetailModal()\r\n\t\t\t},\r\n\t\t\tcloseProductDetailModal() {\r\n\t\t\t\tthis.productModalVisible = false\r\n\t\t\t\tthis.$refs['productModal'].close()\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.product = {}\r\n\t\t\t\t}, 100)\r\n\t\t\t},\r\n\t\t\topenCartDetailsPopup() {\r\n\t\t\t\tthis.$refs['cartPopup'].open()\r\n\t\t\t},\r\n\t\t\tclearCart() {\r\n\t\t\t\tthis.cart = []\r\n\t\t\t},\r\n\t\t\thandMenu(id, i) {\r\n\t\t\t\tif(this.gs && this.gs.goodsStyle==2){\r\n\t\t\t\t\tif(this.ccId == id) return\r\n\t\t\t\t\tthis.ccId = id\r\n\t\t\t\t\tthis.getCategoryGoods()\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.sIndex = i\r\n\t\t\t\t\tthis.pstop = this.categories.find(item => item.id == id).top\r\n\t\t\t\t\t// console.log('this.pstop', id, i, this.pstop)\r\n\t\t\t\t\tthis.$nextTick(() => this.ccId = id)\r\n\t\t\t\t}\t\r\n\t\t\t},\r\n\t\t\tpsroll({\r\n\t\t\t\tdetail\r\n\t\t\t}) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tscrollTop\r\n\t\t\t\t} = detail\r\n\t\t\t\tlet sr = scrollTop +140\r\n\t\t\t\tlet tabs = this.categories.filter(item => item.top <= sr).reverse()\r\n\t\t\t\tif (tabs.length > 0) {\r\n\t\t\t\t\tthis.ccId = tabs[0].id\r\n\t\t\t\t}\r\n\t\t\t\tthis.rectInfoList.forEach((item, index) => {\r\n\t\t\t\t\tif (scrollTop >= item.top && scrollTop <= item.bottom) {\r\n\t\t\t\t\t\tthis.scrollTop = index * uni.upx2px(100);\r\n\t\t\t\t\t\tthis.sIndex = index\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\trfcalc(v1, v2) {\r\n\t\t\t\tthis.rectInfoList = v1\r\n\t\t\t\tthis.categories = v2\r\n\t\t\t},\r\n\t\t\tcalcSize() {\r\n\t\t\t\tlet h = 0\r\n\t\t\t\tlet view = uni.createSelectorQuery().select('#ads')\r\n\t\t\t\tview.fields({\r\n\t\t\t\t\tsize: true\r\n\t\t\t\t}, (data) => {\r\n\t\t\t\t\th += Math.floor(data && data.height)\r\n\t\t\t\t}).exec()\r\n\t\t\t\tthis.categories.forEach((item, i) => {\r\n\t\t\t\t\tlet view = uni.createSelectorQuery().select(`#g-${item.id}`)\r\n\t\t\t\t\tview.fields({\r\n\t\t\t\t\t\tsize: true,\r\n\t\t\t\t\t\trect: true\r\n\t\t\t\t\t}, data => {\r\n\t\t\t\t\t\titem.top = h\r\n\t\t\t\t\t\th += Math.floor(data.height)\r\n\t\t\t\t\t\titem.bottom = h\r\n\t\t\t\t\t\tthis.rectInfoList[i] = {\r\n\t\t\t\t\t\t\t'top': item.top,\r\n\t\t\t\t\t\t\t'bottom': item.bottom\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).exec()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync pay() {\r\n\t\t\t\tif (!this.isLogin && !this.noLogin) {\r\n\t\t\t\t\tthis.$refs['sqBtn'].open()\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet sjsz = this.sjxx.storeSetting\r\n\t\t\t\tif (!sjsz || (sjsz.pickupSwitch != 1 && sjsz.takeoutSwitch != 1)) {\r\n\t\t\t\t\tthis.util.message(this.$t(\"goods.store_no_order_channel\"), 3, 2000)\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (this.havebxp) {\r\n\t\t\t\t\tlet arr = this.sjgood.filter(v => v.isMust == 1),\r\n\t\t\t\t\t\tnum = 0,\r\n\t\t\t\t\t\tcarr = this.scarList.goodsList.map(v => v.spuId)\r\n\t\t\t\t\tif(this.gs && this.gs.goodsStyle==2){\r\n\t\t\t\t\t\tfor (let i = 0; i < arr.length; i++) {\r\n\t\t\t\t\t\t\tif (this.scarList.categoryIds && this.scarList.categoryIds.includes(arr[i].id)) {\r\n\t\t\t\t\t\t\t\tnum += 1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tfor (let i = 0; i < arr.length; i++) {\r\n\t\t\t\t\t\t\tif (arr[i].goodsList.find(item => carr.includes(item.id))) {\r\n\t\t\t\t\t\t\t\tnum += 1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (num < arr.length) {\r\n\t\t\t\t\t\treturn this.util.message(this.$t(\"goods.add_required_items\"), 3, 1500)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// console.log(arr, carr, num)\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.jjmbxx) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tawait this.requestSM(['integralChange', 'balanceChange', 'vipChange'])\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tthis.jjmbxx = true\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/pages/shop/out/pay-order?diningType=${this.diningType ==1 ? this.sjxx && this.sjxx.storeSetting.defaultType : this.diningType}`\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tserach(){\r\n\t\t\t\tthis.go({\r\n\t\t\t\t\tt: 1,\r\n\t\t\t\t\turl: `/pages/shop/search/out?page=shopGoods`,\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\trollOpen(){\r\n\t\t\t\tthis.$refs['rollPopup'].open()\r\n\t\t\t},\r\n\t\t},\r\n\t\tonShareAppMessage() {\r\n\t\t\tlet p = `pages/index/goods?storeId=${this.storeId}`\r\n\t\t\tif(this.product && this.product.id){\r\n\t\t\t\tp = `pages/index/goods?storeId=${this.storeId}&goodId=${this.product.id}`\r\n\t\t\t}\r\n\t\t\treturn this.util.mpShare({\r\n\t\t\t\tt: this.product && this.product.name || this.sjxx.name,\r\n\t\t\t\ti: this.getImgS(this.product && this.product.logo),\r\n\t\t\t\tp,\r\n\t\t\t})\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t@import './goods/goods.scss';\r\n</style>","import mod from \"-!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./goods.vue?vue&type=style&index=0&id=57ad8b70&scoped=true&lang=scss&\"; export default mod; export * from \"-!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./goods.vue?vue&type=style&index=0&id=57ad8b70&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1735024169991\n      var cssReload = require(\"C:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}